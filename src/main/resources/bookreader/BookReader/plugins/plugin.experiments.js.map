{"version":3,"file":"plugins/plugin.experiments.js","mappings":"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","sources":["webpack://@internetarchive/bookreader/./node_modules/core-js/modules/es.object.from-entries.js","webpack://@internetarchive/bookreader/./src/BookReaderPlugin.js","webpack://@internetarchive/bookreader/./src/plugins/plugin.experiments.js"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","// @ts-check\r\n/** @typedef {import(\"./BookReader.js\").default} BookReader */\r\n\r\n/**\r\n * @template TOptions\r\n */\r\nexport class BookReaderPlugin {\r\n  /**\r\n   * @param {BookReader} br\r\n   */\r\n  constructor(br) {\r\n    /** @type {BookReader} */\r\n    this.br = br;\r\n    /** @type {TOptions} */\r\n    this.options;\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   * @param {TOptions} options\r\n   **/\r\n  setup(options) {\r\n    this.options = Object.assign({}, this.options, options);\r\n  }\r\n\r\n  /** @abstract */\r\n  init() {}\r\n\r\n  /**\r\n   * @abstract\r\n   * @protected\r\n   * @param {import (\"./BookReader/PageContainer.js\").PageContainer} pageContainer\r\n   */\r\n  _configurePageContainer(pageContainer) {\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   * @protected\r\n   * @param {JQuery<HTMLElement>} $toolbarElement\r\n   */\r\n  _configureToolbar($toolbarElement) {\r\n  }\r\n\r\n  /** @abstract @protected */\r\n  _bindNavigationHandlers() {}\r\n\r\n  /**\r\n   * @param {JQuery<HTMLElement>} $navBar\r\n   */\r\n  extendNavBar($navBar) {}\r\n}\r\n","// @ts-check\r\nimport { css, html, LitElement } from 'lit';\r\nimport { BookReaderPlugin } from '../BookReaderPlugin.js';\r\nimport { customElement, property, state } from 'lit/decorators.js';\r\nimport { sleep } from '../BookReader/utils.js';\r\n\r\n// @ts-ignore\r\nconst BookReader = /** @type {typeof import('@/src/BookReader.js').default} */(window.BookReader);\r\n\r\nclass ExperimentModel {\r\n  /** @type {string} test */\r\n  name;\r\n  /** @type {string} */\r\n  title;\r\n  /** @type {string} */\r\n  description;\r\n  /** @type {string} */\r\n  icon;\r\n  /** @type {boolean} */\r\n  enabled;\r\n  /** @type {string} */\r\n  learnMore;\r\n\r\n  /** @type {import(\"@/src/BookReader.js\").default} */\r\n  br;\r\n\r\n  assetRoot = '/BookReader/';\r\n\r\n  enabledLoading = false;\r\n\r\n  /**\r\n   * @param {string} path\r\n   */\r\n  buildAssetPath(path) {\r\n    return `${this.assetRoot}${path}`;\r\n  }\r\n\r\n  /**\r\n   * @param {object} param0\r\n   * @param {boolean} param0.manual Whether the experiment was enabled manually\r\n   */\r\n  async enable({ manual }) { }\r\n  async disable() { }\r\n}\r\n\r\nexport class ExperimentsPlugin extends BookReaderPlugin {\r\n  options = {\r\n    enabled: true,\r\n\r\n    /** Where the state of this plugin is saved in localStorage */\r\n    localStorageKey: 'BrExperiments',\r\n\r\n    /** The experiments that should be shown in the experiments panel */\r\n    enabledExperiments: ['translate'],\r\n  }\r\n\r\n  /** @type {ExperimentModel[]} */\r\n  allExperiments = [\r\n    new class extends ExperimentModel {\r\n      name = 'translate';\r\n      title = 'Translate Plugin';\r\n      description = \"Translate books directly in your browser.\";\r\n      learnMore = 'https://mozilla.github.io/translations/';\r\n      icon = 'images/translate.svg';\r\n      enabled = false;\r\n      async enable({ manual = false}) {\r\n        await importAsScript(this.buildAssetPath('plugins/plugin.translate.js'));\r\n        this.br.initializePlugin('translate');\r\n      }\r\n      async disable() {\r\n        // need to reload to remove translate plugin script\r\n        // Sleep so that the event loop can finish processing before the reload\r\n        sleep(0).then(() => {\r\n          window.location.reload();\r\n        });\r\n      }\r\n    }(),\r\n    new class extends ExperimentModel {\r\n      name = 'hypothesis';\r\n      title = 'Hypothes.is';\r\n      description = 'Create public, collaborative, or fully private annotations on books and the web.';\r\n      learnMore = 'https://web.hypothes.is/about/';\r\n      icon = 'images/hypothesis.ico';\r\n      enabled = false;\r\n\r\n      async enable({ manual = false }) {\r\n        // Hypothesis configs ; see https://h.readthedocs.io/projects/client/en/latest/publishers/config.html\r\n        const configScript = document.createElement('script');\r\n        configScript.type = 'application/json';\r\n        configScript.className = 'js-hypothesis-config';\r\n        configScript.textContent = JSON.stringify({\r\n          // Open the sidebar if this is the first time enabling\r\n          openSidebar: manual,\r\n          assetRoot: this.buildAssetPath('hypothesis/'),\r\n        });\r\n\r\n        document.head.appendChild(configScript);\r\n        return importAsScript(this.buildAssetPath('hypothesis/build/boot.js'));\r\n        // For testing\r\n        // return importAsScript('http://localhost:3001/hypothesis');\r\n      }\r\n\r\n      async disable() {\r\n        // need to reload to remove the Hypothesis script\r\n        // Sleep so that the event loop can finish processing before the reload\r\n        sleep(0).then(() => {\r\n          window.location.reload();\r\n        });\r\n      }\r\n    }(),\r\n  ]\r\n\r\n  /** @type {BrExperimentsPanel} */\r\n  _panel;\r\n\r\n  async init() {\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    for (const experiment of this.allExperiments) {\r\n      // TODO: imagesBaseURL should be replaced with assetRoot everywhere\r\n      experiment.assetRoot = this.br.options.imagesBaseURL.replace(/images\\/$/, '');\r\n      experiment.icon = experiment.buildAssetPath(experiment.icon);\r\n      experiment.br = this.br;\r\n    }\r\n\r\n    this._loadExperimentStates();\r\n    await Promise.resolve();\r\n    this._render();\r\n  }\r\n\r\n  _loadExperimentStates() {\r\n    const savedStates = JSON.parse(localStorage.getItem(this.options.localStorageKey) || '{}');\r\n    this.allExperiments.forEach(experiment => {\r\n      if (savedStates[experiment.name] !== undefined) {\r\n        experiment.enabled = savedStates[experiment.name];\r\n        if (experiment.enabled) {\r\n          experiment.enable({ manual: false });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _saveExperimentStates() {\r\n    const states = Object.fromEntries(\r\n      this.allExperiments.map(experiment => [experiment.name, experiment.enabled]),\r\n    );\r\n    localStorage.setItem(this.options.localStorageKey, JSON.stringify(states));\r\n  }\r\n\r\n  /**\r\n   * @param {ExperimentModel} experiment\r\n   * @param {boolean} enabled\r\n   */\r\n  async _toggleExperiment(experiment, enabled) {\r\n    experiment.enabledLoading = true;\r\n    this.br.plugins.archiveAnalytics?.sendEvent(`BRExperiment-${experiment.name}`, enabled ? 'Enable' : 'Disable');\r\n    this._panel.requestUpdate();\r\n\r\n    if (enabled) {\r\n      await experiment.enable({ manual: true });\r\n    } else {\r\n      await experiment.disable();\r\n    }\r\n    experiment.enabledLoading = false;\r\n    experiment.enabled = enabled;\r\n    this._panel.requestUpdate();\r\n  }\r\n\r\n  _render() {\r\n    this.br.shell.menuProviders['experiments'] = {\r\n      id: 'experiments',\r\n      icon: html`\r\n        <img src=\"${this.br.options.imagesBaseURL}/icon_experiment.svg\" width=\"26\"/>\r\n      `,\r\n      label: 'Experiments',\r\n      component: html`<br-experiments-panel\r\n        .experiments=\"${this.allExperiments.filter(experiment => this.options.enabledExperiments.includes(experiment.name))}\"\r\n        @connected=\"${e => this._panel = e.target}\"\r\n        @toggle=\"${async e => {\r\n        await this._toggleExperiment(e.detail.experiment, e.detail.enabled);\r\n        this._saveExperimentStates();\r\n      }}\"\r\n      />`,\r\n    };\r\n    this.br.shell.updateMenuContents();\r\n  }\r\n}\r\nBookReader?.registerPlugin('experiments', ExperimentsPlugin);\r\n\r\n@customElement('br-experiments-panel')\r\nexport class BrExperimentsPanel extends LitElement {\r\n\r\n  /** @type {ExperimentModel[]} */\r\n  @property({ type: Array }) experiments = [];\r\n\r\n  render() {\r\n    return html`\r\n      <div style=\"padding: 10px\">\r\n        ${this.experiments.map(\r\n      experiment => html`\r\n        <br-experiment-toggle\r\n          .icon=\"${experiment.icon}\"\r\n          .title=\"${experiment.title}\"\r\n          .description=\"${experiment.description}\"\r\n          .enabled=\"${experiment.enabled}\"\r\n          .loading=\"${experiment.enabledLoading}\"\r\n          .learnMore=\"${experiment.learnMore}\"\r\n          @toggle=\"${e => this._dispatchToggle(experiment, e.detail.enabled)}\"\r\n        ></br-experiment-toggle>\r\n      `,\r\n    )}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * @param {ExperimentModel} experiment\r\n   * @param {boolean} enabled\r\n   */\r\n  async _dispatchToggle(experiment, enabled) {\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      detail: { experiment, enabled },\r\n    }));\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this.dispatchEvent(new CustomEvent('connected'));\r\n  }\r\n}\r\n\r\n@customElement('br-experiment-toggle')\r\nexport class BrExperimentToggle extends LitElement {\r\n  @property({ type: String }) icon = '';\r\n  @property({ type: String }) title = '';\r\n  @property({ type: String }) description = '';\r\n  @property({ type: Boolean }) enabled = false;\r\n  @property({ type: Boolean }) loading = false;\r\n  @property({ type: String }) learnMore = '';\r\n\r\n  /**\r\n   * We want to disable the button immediately if loading, but only display\r\n   * the loading indicator after 200ms.\r\n   */\r\n  @state() _longLoading = false;\r\n\r\n  /** @override */\r\n  update(changedProperties) {\r\n    super.update(changedProperties);\r\n    if (changedProperties.has('loading')) {\r\n      if (this.loading) {\r\n        sleep(500).then(() => {\r\n          if (this.loading) {\r\n            this._longLoading = true;\r\n            this.requestUpdate();\r\n          }\r\n        });\r\n      } else {\r\n        this._longLoading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"experiment-card\" style=\"margin-bottom: 10px;\">\r\n        <div style=\"display: flex; align-items: center; gap: 10px;\">\r\n          <img src=\"${this.icon}\" style=\"width: 20px; height: 20px;\" alt=\"\" />\r\n          <div style=\"flex-grow: 1; font-weight: bold;\">${this.title}</div>\r\n        </div>\r\n        <p style=\"opacity: 0.9\">\r\n          ${this.description}\r\n          ${this.learnMore ? html`<a href=\"${this.learnMore}\" target=\"_blank\">Learn more</a>.` : ''}\r\n        </p>\r\n        <div style=\"display: flex\">\r\n          <div style=\"flex-grow: 1;\"></div>\r\n          <button @click=\"${this._dispatchToggle}\" .disabled=\"${this.loading}\">\r\n            ${this._longLoading ? 'Loadingâ€¦' : this.enabled ? 'Disable' : 'Enable'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static get styles() {\r\n    return css`\r\n      .experiment-card {\r\n        border-radius: 8px;\r\n        background-color: #fff2;\r\n        padding: 10px;\r\n        display: flex;\r\n        flex-direction: column;\r\n      }\r\n\r\n      .experiment-card p {\r\n        margin: 6px 0;\r\n      }\r\n    `;\r\n  }\r\n\r\n  _dispatchToggle() {\r\n    this.dispatchEvent(new CustomEvent('toggle', { detail: { enabled: !this.enabled } }));\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n */\r\nasync function importAsScript(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const script = document.createElement('script');\r\n    script.src = url;\r\n    script.onload = () => resolve();\r\n    script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\r\n    document.head.appendChild(script);\r\n  });\r\n}\r\n"],"names":["$","iterate","createProperty","target","stat","fromEntries","iterable","obj","k","v","AS_ENTRIES","BookReaderPlugin","br","_classCallCheck","this","options","key","value","Object","assign","pageContainer","$toolbarElement","$navBar","_regeneratorRuntime","e","t","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","_defineProperties","_toPropertyKey","_createClass","_defineProperty","toPrimitive","String","_toPrimitive","BookReader","window","ExperimentModel","path","concat","assetRoot","_enable","_callee","_ref","_context","manual","_x","_disable","_callee2","_context2","ExperimentsPlugin","_BookReaderPlugin","_this","_len","args","Array","_key","_callSuper","enabled","localStorageKey","enabledExperiments","_ExperimentModel2","_class","_this2","_len2","_key2","_inherits","_enable2","_callee3","_ref2","_context3","importAsScript","buildAssetPath","initializePlugin","_x2","_disable2","_callee4","_context4","sleep","location","reload","_ExperimentModel3","_class2","_this3","_len3","_key3","_enable3","_callee5","_ref3","_ref3$manual","configScript","_context5","document","createElement","className","textContent","JSON","stringify","openSidebar","head","appendChild","_x3","_disable3","_callee6","_context6","_init","_callee7","_iterator","_step","experiment","_context7","_createForOfIteratorHelper","allExperiments","imagesBaseURL","replace","icon","err","_loadExperimentStates","_render","savedStates","parse","localStorage","getItem","undefined","enable","states","map","setItem","_toggleExperiment2","_callee8","_this$br$plugins$arch","_context8","enabledLoading","plugins","archiveAnalytics","sendEvent","_panel","requestUpdate","disable","_x4","_x5","_this4","shell","menuProviders","id","html","_templateObject","_taggedTemplateLiteral","label","component","_templateObject2","filter","includes","_ref4","_callee9","_context9","_toggleExperiment","detail","_saveExperimentStates","_x6","updateMenuContents","_x9","_importAsScript","_callee11","url","_context11","reject","script","src","onload","onerror","registerPlugin","_decorate","customElement","_initialize","_LitElement","_dispatchToggle2","BrExperimentsPanel","_LitElement2","_this5","_len4","_key4","F","kind","decorators","property","_this6","_templateObject3","experiments","_templateObject4","title","description","learnMore","_dispatchToggle","_callee10","_context10","dispatchEvent","CustomEvent","_x7","_x8","_superPropGet","LitElement","_initialize2","_LitElement3","BrExperimentToggle","_LitElement4","_this7","_len5","_key5","Boolean","state","changedProperties","_this8","has","loading","_longLoading","_templateObject5","_templateObject6","static","css","_templateObject7"],"sourceRoot":""}