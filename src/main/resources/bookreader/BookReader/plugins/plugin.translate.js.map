{"version":3,"file":"plugins/plugin.translate.js","mappings":"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","sources":["webpack://@internetarchive/bookreader/./node_modules/@internetarchive/ia-activity-indicator/src/ia-activity-indicator.js","webpack://@internetarchive/bookreader/./node_modules/@internetarchive/ia-activity-indicator/ia-activity-indicator.js","webpack://@internetarchive/bookreader/./src/BookReaderPlugin.js","webpack://@internetarchive/bookreader/./node_modules/@internetarchive/bergamot-translator/translator.js","webpack://@internetarchive/bookreader/./src/plugins/translate/TranslationManager.js","webpack://@internetarchive/bookreader/./src/plugins/translate/plugin.translate.js","webpack://@internetarchive/bookreader/./node_modules/iso-language-codes/dist/index.mjs","webpack://@internetarchive/bookreader/./src/plugins/tts/utils.js","webpack://@internetarchive/bookreader/./src/util/cache.js"],"sourcesContent":["import { LitElement, html, css } from 'lit';\r\n\r\nconst IAActivityIndicatorMode = Object.freeze({\r\n  processing: 'processing',\r\n  complete: 'complete',\r\n});\r\n\r\nclass IAActivityIndicator extends LitElement {\r\n  static get properties() {\r\n    return {\r\n      mode: { type: String },\r\n    };\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.mode = IAActivityIndicatorMode.processing;\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"${this.mode}\">\r\n        <svg\r\n          viewBox=\"0 0 120 120\"\r\n          preserveAspectRatio=\"none\"\r\n          version=\"1.1\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n          aria-labelledby=\"indicatorTitle indicatorDescription\"\r\n        >\r\n          <title id=\"indicatorTitle\">Activity Indicator</title>\r\n          <desc id=\"indicatorDescription\">\r\n            A rotating activity indicator with three dots in the middle.\r\n          </desc>\r\n          <g\r\n            id=\"icons/check-ring---squared\"\r\n            stroke=\"none\"\r\n            stroke-width=\"1\"\r\n            fill=\"none\"\r\n            fill-rule=\"evenodd\"\r\n          >\r\n            <path\r\n              id=\"completed-ring\"\r\n              class=\"loaded-indicator\"\r\n              d=\"M60,10 C70.5816709,10 80.3955961,13.2871104 88.4763646,18.8959201 L78.3502633,29.0214223 C72.9767592,25.8315427 66.7022695,24 60,24 C40.117749,24 24,40.117749 24,60 C24,79.882251 40.117749,96 60,96 C79.882251,96 96,79.882251 96,60 L95.995,59.46 L108.327675,47.128668 C109.350926,50.9806166 109.925886,55.015198 109.993301,59.1731586 L110,60 C110,87.6142375 87.6142375,110 60,110 C32.3857625,110 10,87.6142375 10,60 C10,32.3857625 32.3857625,10 60,10 Z\"\r\n            ></path>\r\n            <polygon\r\n              id=\"check\"\r\n              class=\"loaded-indicator\"\r\n              transform=\"translate(75.000000, 41.500000) rotate(44.000000) translate(-75.000000, -41.500000) \"\r\n              points=\"96 85 54 85 54 65 76 64.999 76 -2 96 -2\"\r\n            ></polygon>\r\n            <path\r\n              id=\"activity-ring\"\r\n              class=\"activity-indicator\"\r\n              d=\"M60,10 C69.8019971,10 78.9452178,12.8205573 86.6623125,17.6943223 L76.4086287,27.9484118 C71.4880919,25.4243078 65.9103784,24 60,24 C40.117749,24 24,40.117749 24,60 C24,79.882251 40.117749,96 60,96 C79.882251,96 96,79.882251 96,60 C96,53.3014663 94.1704984,47.0302355 90.9839104,41.6587228 L101.110332,31.5326452 C106.715332,39.6116982 110,49.4222615 110,60 C110,87.6142375 87.6142375,110 60,110 C32.3857625,110 10,87.6142375 10,60 C10,32.3857625 32.3857625,10 60,10 Z\"\r\n            ></path>\r\n            <g\r\n              id=\"activity-dots\"\r\n              class=\"activity-indicator\"\r\n              transform=\"translate(40.000000, 55.000000)\"\r\n            >\r\n              <circle id=\"left-dot\" cx=\"5\" cy=\"5\" r=\"5\"></circle>\r\n              <circle id=\"middle-dot\" cx=\"20\" cy=\"5\" r=\"5\"></circle>\r\n              <circle id=\"right-dot\" cx=\"35\" cy=\"5\" r=\"5\"></circle>\r\n            </g>\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static get styles() {\r\n    const checkmarkColorCss = css`var(--activityIndicatorCheckmarkColor, #31A481)`;\r\n    const completedRingColorCss = css`var(--activityIndicatorCompletedRingColor, #31A481)`;\r\n    const loadingRingColorCss = css`var(--activityIndicatorLoadingRingColor, #333333)`;\r\n    const loadingDotColorCss = css`var(--activityIndicatorLoadingDotColor, #333333)`;\r\n\r\n    return css`\r\n      #completed-ring {\r\n        fill: ${completedRingColorCss};\r\n      }\r\n\r\n      #check {\r\n        fill: ${checkmarkColorCss};\r\n      }\r\n\r\n      #activity-ring {\r\n        fill: ${loadingRingColorCss};\r\n      }\r\n\r\n      #activity-dots {\r\n        fill: ${loadingDotColorCss};\r\n      }\r\n\r\n      .activity-indicator {\r\n        opacity: 0;\r\n        transition: opacity 0.25s ease-out;\r\n      }\r\n\r\n      .processing .activity-indicator {\r\n        opacity: 1;\r\n      }\r\n\r\n      .loaded-indicator {\r\n        opacity: 1;\r\n        transition: opacity 0.25s ease-out;\r\n      }\r\n\r\n      .processing .loaded-indicator {\r\n        opacity: 0;\r\n      }\r\n\r\n      .image {\r\n        border: 1px solid red;\r\n        display: inline-block;\r\n      }\r\n\r\n      .processing #activity-ring {\r\n        animation: rotate 1.3s infinite linear;\r\n        transform-origin: 50px 50px;\r\n        transform-box: fill-box;\r\n      }\r\n\r\n      .processing #left-dot {\r\n        opacity: 0;\r\n        animation: dot 1.3s infinite;\r\n        animation-delay: 0.2s;\r\n      }\r\n\r\n      .processing #middle-dot {\r\n        opacity: 0;\r\n        animation: dot 1.3s infinite;\r\n        animation-delay: 0.4s;\r\n      }\r\n\r\n      .processing #right-dot {\r\n        opacity: 0;\r\n        animation: dot 1.3s infinite;\r\n        animation-delay: 0.6s;\r\n      }\r\n\r\n      @keyframes rotate {\r\n        0% {\r\n          transform: rotate(-360deg);\r\n        }\r\n        100% {\r\n          /* This frame is supposed to be inferred, but Safari doesn't rotate it unless we're explicit */\r\n          transform: rotate(0deg);\r\n        }\r\n      }\r\n\r\n      @keyframes dot {\r\n        0% {\r\n          opacity: 0;\r\n        }\r\n        25% {\r\n          opacity: 1;\r\n        }\r\n        100% {\r\n          opacity: 0;\r\n        }\r\n      }\r\n    `;\r\n  }\r\n}\r\n\r\nexport { IAActivityIndicator, IAActivityIndicatorMode };\r\n","import { IAActivityIndicator } from './src/ia-activity-indicator.js';\r\n\r\nwindow.customElements.define('ia-activity-indicator', IAActivityIndicator);\r\n","// @ts-check\r\n/** @typedef {import(\"./BookReader.js\").default} BookReader */\r\n\r\n/**\r\n * @template TOptions\r\n */\r\nexport class BookReaderPlugin {\r\n  /**\r\n   * @param {BookReader} br\r\n   */\r\n  constructor(br) {\r\n    /** @type {BookReader} */\r\n    this.br = br;\r\n    /** @type {TOptions} */\r\n    this.options;\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   * @param {TOptions} options\r\n   **/\r\n  setup(options) {\r\n    this.options = Object.assign({}, this.options, options);\r\n  }\r\n\r\n  /** @abstract */\r\n  init() {}\r\n\r\n  /**\r\n   * @abstract\r\n   * @protected\r\n   * @param {import (\"./BookReader/PageContainer.js\").PageContainer} pageContainer\r\n   */\r\n  _configurePageContainer(pageContainer) {\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   * @protected\r\n   * @param {JQuery<HTMLElement>} $toolbarElement\r\n   */\r\n  _configureToolbar($toolbarElement) {\r\n  }\r\n\r\n  /** @abstract @protected */\r\n  _bindNavigationHandlers() {}\r\n\r\n  /**\r\n   * @param {JQuery<HTMLElement>} $navBar\r\n   */\r\n  extendNavBar($navBar) {}\r\n}\r\n","/**\n * @typedef {Object} TranslationRequest\n * @property {String} from\n * @property {String} to\n * @property {String} text\n * @property {Boolean} html\n * @property {Integer?} priority\n */\n\n/**\n * @typedef {Object} TranslationResponse\n * @property {TranslationRequest} request\n * @property {{text: string}} target\n */\n\n/**\n * NodeJS compatibility, a thin WebWorker layer around node:worker_threads.\n */\nif (!(typeof window !== 'undefined' && window.Worker)) {\n    globalThis.Worker = class {\n        #worker;\n\n        constructor(url) {\n            this.#worker = new Promise(async (accept) => {\n                const {Worker} = await import(/* webpackIgnore: true */ 'node:worker_threads');\n                accept(new Worker(url));\n            });\n        }\n\n        addEventListener(eventName, callback) {\n            this.#worker.then(worker => worker.on(eventName, (data) => callback({data})));\n        }\n\n        postMessage(message) {\n            this.#worker.then(worker => worker.postMessage(message));\n        }\n\n        terminate() {\n            this.#worker.then(worker => worker.terminate());\n        }\n    }\n}\n\n/**\n * Thrown when a pending translation is replaced by another newer pending\n * translation.\n */\nexport class SupersededError extends Error {}\n\n\n/**\n * Thrown when a translation was removed from the queue.\n */\nexport class CancelledError extends Error {}\n\n\n/**\n * Wrapper around bergamot-translator loading and model management.\n */\n export class TranslatorBacking {\n    \n    /**\n     * @param {{\n     *  cacheSize?: number,\n     *  useNativeIntGemm?: boolean,\n     *  downloadTimeout?: number,\n     *  registryUrl?: string\n     *  pivotLanguage?: string?\n     *  onerror?: (err: Error)\n     * }} options\n     */\n    constructor(options) {\n        this.options = options || {};\n\n        this.registryUrl = this.options.registryUrl || 'https://bergamot.s3.amazonaws.com/models/index.json';\n\n        this.downloadTimeout = 'downloadTimeout' in this.options ? parseInt(this.options.downloadTimeout) : 60000;\n\n        /**\n         * registry of all available models and their urls\n         * @type {Promise<Model[]>}\n         */\n        this.registry = this.loadModelRegistery();\n\n        /**\n         * Map of downloaded model data files as buffers per model.\n         * @type {Map<{from:string,to:string}, Promise<Map<string,ArrayBuffer>>>}\n         */\n        this.buffers = new Map();\n\n        /**\n         * @type {string?}\n         */\n        this.pivotLanguage = 'pivotLanguage' in this.options ? options.pivotLanguage : 'en';\n        \n        /**\n         * A map of language-pairs to a list of models you need for it.\n         * @type {Map<{from:string,to:string}, Promise<{from:string,to:string}[]>>}\n         */\n        this.models = new Map();\n\n        /**\n         * Error handler for all errors that are async, not tied to a specific\n         * call and that are unrecoverable.\n         * @type {(error: Error)}\n         */\n        this.onerror = this.options.onerror || (err => console.error('WASM Translation Worker error:', err));\n    }\n\n    /**\n     * Loads a worker thread, and wraps it in a message passing proxy. I.e. it\n     * exposes the entire interface of TranslationWorker here, and all calls\n     * to it are async. Do note that you can only pass arguments that survive\n     * being copied into a message. \n     * @return {Promise<{worker:Worker, exports:Proxy<TranslationWorker>}>}\n     */\n    async loadWorker() {\n        const worker = (\n            this.options.workerUrl ? new Worker(this.options.workerUrl) :\n            new Worker(new URL('./worker/translator-worker.js', import.meta.url))\n        );\n\n        /**\n         * Incremental counter to derive request/response ids from.\n         */\n        let serial = 0;\n\n        /**\n         * Map of pending requests\n         * @type {Map<number,{accept:(any), reject:(Error)}>}\n         */\n        const pending = new Map();\n\n        // Function to send requests\n        const call = (name, ...args) => new Promise((accept, reject) => {\n            const id = ++serial;\n            pending.set(id, {\n                accept,\n                reject,\n                callsite: { // for debugging which call caused the error\n                    message: `${name}(${args.map(arg => String(arg)).join(', ')})`,\n                    stack: new Error().stack\n                }\n            });\n            worker.postMessage({id, name, args});\n        });\n\n        //  receive responses\n        worker.addEventListener('message', function({data: {id, result, error}}) {\n            if (!pending.has(id)) {\n                console.debug('Received message with unknown id:', arguments[0]);\n                throw new Error(`BergamotTranslator received response from worker to unknown call '${id}'`);\n            }\n\n            const {accept, reject, callsite} = pending.get(id);\n            pending.delete(id);\n\n            if (error !== undefined)\n                reject(Object.assign(new Error(), error, {\n                    message: error.message + ` (response to ${callsite.message})`,\n                    stack: error.stack ? `${error.stack}\\n${callsite.stack}` : callsite.stack\n                }));\n            else\n                accept(result);\n        });\n\n        //  and general errors\n        worker.addEventListener('error', this.onerror.bind(this));\n\n        // Await initialisation. This will also nicely error out if the WASM\n        // runtime fails to load.\n        await call('initialize', this.options);\n\n        /**\n         * Little wrapper around the message passing api of Worker to make it\n         * easy to await a response to a sent message. This wraps the worker in\n         * a Proxy so you can treat it as if it is an instance of the\n         * TranslationWorker class that lives inside the worker. All function\n         * calls to it are transparently passed through the message passing\n         * channel.\n         */\n        return {\n            worker,\n            exports: new Proxy({}, {\n                get(target, name, receiver) {\n                    // Prevent this object from being marked \"then-able\"\n                    if (name !== 'then')\n                        return (...args) => call(name, ...args);\n                }\n            })\n        };\n    }\n\n    /**\n     * Loads the model registry. Uses the registry shipped with this extension,\n     * but formatted a bit easier to use, and future-proofed to be swapped out\n     * with a TranslateLocally type registry.\n     * @return {Promise<{\n     *   from: string,\n     *   to: string,\n     *   files: {\n     *     [part:string]: {\n     *       name: string,\n     *       size: number,\n     *       expectedSha256Hash: string\n     *     }\n     *   }[]\n     * }>}\n     */\n    async loadModelRegistery() {\n        const response = await fetch(this.registryUrl, {credentials: 'omit'});\n        const registry = await response.json();\n\n        // Add 'from' and 'to' keys for each model.\n        return Array.from(Object.entries(registry), ([key, files]) => {\n            const languages = key.match(/^([a-z]{2}(-[a-z]+)?)([a-z]{2}(-[a-z]+)?)/i);\n            return {\n                from: languages[1],\n                to: languages[3],\n                files\n            }\n        });\n    }\n\n    /**\n     * Gets or loads translation model data. Caching wrapper around\n     * `loadTranslationModel()`.\n     * @param {{from:string, to:string}}\n     * @return {Promise<{\n     *   model: ArrayBuffer,\n     *   vocab: ArrayBuffer,\n     *   shortlist: ArrayBuffer,\n     *   qualityModel: ArrayBuffer?\n     * }>}\n     */\n    getTranslationModel({from, to}, options) {\n        const key = JSON.stringify({from, to});\n\n        if (!this.buffers.has(key)) {\n            const promise = this.loadTranslationModel({from, to}, options);\n\n            // set the promise so we return the same promise when its still pending\n            this.buffers.set(key, promise);\n\n            // But if loading fails, remove the promise again so we can try again later\n            promise.catch(err => this.buffers.delete(key))\n        }\n\n        return this.buffers.get(key);\n    }\n\n    /**\n     * Downloads a translation model and returns a set of\n     * ArrayBuffers. These can then be passed to a TranslationWorker thread\n     * to instantiate a TranslationModel inside the WASM vm.\n     * @param {{from:string, to:string}}\n     * @param {{signal:AbortSignal?}?}\n     * @return {Promise<{\n     *   model: ArrayBuffer,\n     *   vocab: ArrayBuffer,\n     *   shortlist: ArrayBuffer,\n     *   qualityModel: ArrayBuffer?\n     *   config: string?\n     * }>}\n     */\n    async loadTranslationModel({from, to}, options) {\n        performance.mark(`loadTranslationModule.${JSON.stringify({from, to})}`);\n\n        // Find that model in the registry which will tell us about its files\n        const entries = (await this.registry).filter(model => model.from == from && model.to == to);\n\n        if (!entries)\n            throw new Error(`No model for '${from}' -> '${to}'`);\n\n        const files = entries[0].files;\n\n        const abort = () => reject(new CancelledError('abort signal'));\n\n        // Promise that resolves (or rejects really) when the abort signal hits\n        const escape = new Promise((accept, reject) => {\n            if (options?.signal)\n                options.signal.addEventListener('abort', abort);\n        });\n\n        // Download all files mentioned in the registry entry. Race the promise\n        // of all fetch requests, and a promise that rejects on the abort signal\n        const buffers = Object.fromEntries(await Promise.race([\n            Promise.all(Object.entries(files).map(async ([part, file]) => {\n                // Special case where qualityModel is not part of the model, and this\n                // should also catch the `config` case.\n                if (file === undefined || file.name === undefined)\n                    return [part, null];\n\n                try {\n                    return [part, await this.fetch(file.name, file.expectedSha256Hash, options)];\n                } catch (cause) {\n                    throw new Error(`Could not fetch ${file.name} for ${from}->${to} model`, {cause});\n                }\n            })),\n            escape\n        ]));\n\n        // Nothing to abort now, clean up abort promise\n        if (options?.signal)\n            options.signal.removeEventListener('abort', abort);\n\n        performance.measure('loadTranslationModel', `loadTranslationModule.${JSON.stringify({from, to})}`);\n\n        let vocabs = [];\n\n        if (buffers.vocab)\n            vocabs = [buffers.vocab]\n        else if (buffers.trgvocab && buffers.srcvocab)\n            vocabs = [buffers.srcvocab, buffers.trgvocab]\n        else\n            throw new Error(`Could not identify vocab files for ${from}->${to} model among: ${Array.from(Object.keys(files)).join(' ')}`);\n\n        let config = {};\n\n        // For the Ukrainian models we need to override the gemm-precision\n        if (files.model.name.endsWith('intgemm8.bin'))\n            config['gemm-precision'] = 'int8shiftAll';\n\n        // If quality estimation is used, we need to turn off skip-cost. Turning\n        // this off causes quite the slowdown.\n        if (files.qualityModel)\n            config['skip-cost'] = false;\n\n        // Allow the registry to also specify marian configuration parameters\n        if (files.config)\n            Object.assign(config, files.config);\n\n        // Translate to generic bergamot-translator format that also supports\n        // separate vocabularies for input & output language, and calls 'lex'\n        // a more descriptive 'shortlist'.\n        return {\n            model: buffers.model,\n            shortlist: buffers.lex,\n            vocabs,\n            qualityModel: buffers.qualityModel,\n            config\n        };\n    }\n\n    /**\n     * Helper to download file from the web. Verifies the checksum.\n     * @param {string} url\n     * @param {string?} checksum sha256 checksum as hexadecimal string\n     * @param {{signal:AbortSignal}?} extra fetch options\n     * @returns {Promise<ArrayBuffer>}\n     */\n    async fetch(url, checksum, extra) {\n        // Rig up a timeout cancel signal for our fetch\n        const controller = new AbortController();\n        const abort = () => controller.abort();\n\n        const timeout = this.downloadTimeout ? setTimeout(abort, this.downloadTimeout) : null;\n\n        try {\n            // Also maintain the original abort signal\n            if (extra?.signal)\n                extra.signal.addEventListener('abort', abort);\n\n            const options = {\n                credentials: 'omit',\n                signal: controller.signal,\n            };\n\n            if (checksum)\n                options['integrity'] = `sha256-${this.hexToBase64(checksum)}`;\n\n            // Disable the integrity check for NodeJS because of\n            // https://github.com/nodejs/undici/issues/1594\n            if (typeof window === 'undefined')\n                delete options['integrity'];\n\n            // Start downloading the url, using the hex checksum to ask\n            // `fetch()` to verify the download using subresource integrity \n            const response = await fetch(url, options);\n\n            // Finish downloading (or crash due to timeout)\n            return await response.arrayBuffer();\n\n        } finally {\n            if (timeout)\n                clearTimeout(timeout);\n\n            if (extra?.signal)\n                extra.signal.removeEventListener('abort', abort);\n        }\n    }\n\n    /**\n     * Converts the hexadecimal hashes from the registry to something we can use with\n     * the fetch() method.\n     */\n    hexToBase64(hexstring) {\n        return btoa(hexstring.match(/\\w{2}/g).map(function(a) {\n            return String.fromCharCode(parseInt(a, 16));\n        }).join(\"\"));\n    }\n\n    /**\n     * Crappy named method that gives you a list of models to translate from\n     * one language into the other. Generally this will be the same as you\n     * just put in if there is a direct model, but it could return a list of\n     * two models if you need to pivot through a third language.\n     * Returns just [{from:str,to:str}...]. To be used something like this:\n     * ```\n     * const models = await this.getModels(from, to);\n     * models.forEach(({from, to}) => {\n     *   const buffers = await this.loadTranslationModel({from,to});\n     *   [TranslationWorker].loadTranslationModel({from,to}, buffers)\n     * });\n     * ```\n     * @returns {Promise<TranslationModel[]>}\n     */\n    getModels({from, to}) {\n        const key = JSON.stringify({from, to});\n\n        // Note that the `this.models` map stores Promises. This so that\n        // multiple calls to `getModels` that ask for the same model will\n        // return the same promise, and the actual lookup is only done once.\n        // The lookup is async because we need to await `this.registry`\n        if (!this.models.has(key))\n            this.models.set(key, this.findModels(from, to));\n\n        return this.models.get(key);\n    }\n\n    /**\n     * Find model (or model pair) to translate from `from` to `to`.\n     * @param {string} from\n     * @param {string} to\n     * @returns {Promise<TranslationModel[]>}\n     */\n    async findModels(from, to) {\n        const registry = await this.registry;\n\n        let direct = [], outbound = [], inbound = [];\n\n        registry.forEach(model => {\n            if (model.from === from && model.to === to)\n                direct.push(model);\n            else if (model.from === from && model.to === this.pivotLanguage)\n                outbound.push(model);\n            else if (model.to === to && model.from === this.pivotLanguage)\n                inbound.push(model);\n        });\n\n        if (direct.length)\n            return [direct[0]];\n\n        if (outbound.length && inbound.length)\n            return [outbound[0], inbound[0]];\n\n        throw new Error(`No model available to translate from '${from}' to '${to}'`);\n    }\n}\n\n/**\n * Translator balancing between throughput and latency. Can use multiple worker\n * threads.\n */\nexport class BatchTranslator {\n    /**\n     * @param {{\n     *  cacheSize?: number,\n     *  useNativeIntGemm?: boolean,\n     *  workers?: number,\n     *  batchSize?: number,\n     *  downloadTimeout?: number,\n     *  workerUrl?: string | URL,\n     *  registryUrl?: string\n     *  pivotLanguage?: string?\n     * }} options\n     */\n    constructor(options, backing) {\n        if (!backing)\n            backing = new TranslatorBacking(options);\n\n        this.backing = backing;\n\n        /**\n         * @type {Array<{idle:Boolean, worker:Proxy}>} List of active workers\n         * (and a flag to mark them idle or not)\n         */\n        this.workers = [];\n\n        /**\n         * Maximum number of workers\n         * @type {number} \n         */\n        this.workerLimit = Math.max(options?.workers || 0, 1);\n\n        /**\n         * List of batches we push() to & shift() from using `enqueue`.\n         * @type {{\n         *    id: number,\n         *    key: string,\n         *    priority: number,\n         *    models: TranslationModel[],\n         *    requests: Array<{\n         *      request: TranslationRequest,\n         *      resolve: (response: TranslationResponse),\n         *      reject: (error: Error)\n         *    }>\n         * }}\n         */\n        this.queue = [];\n\n        /**\n         * batch serial to help keep track of batches when debugging\n         * @type {Number}\n         */\n        this.batchSerial = 0;\n\n        /**\n         * Number of requests in a batch before it is ready to be translated in\n         * a single call. Bigger is better for throughput (better matrix packing)\n         * but worse for latency since you'll have to wait for the entire batch\n         * to be translated.\n         * @type {Number}\n         */\n        this.batchSize = Math.max(options?.batchSize || 8, 1);\n\n        this.onerror = options?.onerror || (err => console.error('WASM Translation Worker error:', err));\n    }\n    \n    /**\n     * Destructor that stops and cleans up.\n     */\n    async delete() {\n        // Empty the queue\n        this.remove(() => true);\n\n        // Terminate the workers\n        this.workers.forEach(({worker}) => worker.terminate());\n    }\n\n    /**\n     * Makes sure queued work gets send to a worker. Will delay it till `idle`\n     * to make sure the batches have been filled to some degree. Will keep\n     * calling itself as long as there is work in the queue, but it does not\n     * hurt to call it multiple times. This function always returns immediately.\n     */\n    notify() {\n        setTimeout(async () => {\n            // Is there work to be done?\n            if (!this.queue.length)\n                return;\n\n            // Find an idle worker\n            let worker = this.workers.find(worker => worker.idle);\n\n            // No worker free, but space for more?\n            if (!worker && this.workers.length < this.workerLimit) {\n                try {\n                    // Claim a place in the workers array (but mark it busy so\n                    // it doesn't get used by any other `notify()` calls).\n                    const placeholder = {idle: false};\n                    this.workers.push(placeholder);\n\n                    // adds `worker` and `exports` props\n                    Object.assign(placeholder, await this.backing.loadWorker());\n\n                    // At this point we know our new worker will be usable.\n                    worker = placeholder;\n                } catch (e) {\n                    this.onerror(new Error(`Could not initialise translation worker: ${e.message}`));\n                }\n            }\n\n            // If no worker, that's the end of it.\n            if (!worker)\n                return;\n\n            // Up to this point, this function has not used await, so no\n            // chance that another call stole our batch since we did the check\n            // at the beginning of this function and JavaScript is only\n            // cooperatively parallel.\n            const batch = this.queue.shift();\n\n            // Put this worker to work, marking as busy\n            worker.idle = false;\n            try {\n                await this.consumeBatch(batch, worker.exports);\n            } catch (e) {\n                batch.requests.forEach(({reject}) => reject(e));\n            }\n            worker.idle = true;\n\n            // Is there more work to be done? Do another idleRequest\n            if (this.queue.length)\n                this.notify();\n        });\n    }\n\n    /**\n     * The only real public call you need!\n     * ```\n     * const {target: {text:string}} = await this.translate({\n     *   from: 'de',\n     *   to: 'en',\n     *   text: 'Hallo Welt!',\n     *   html: false, // optional\n     *   priority: 0 // optional, like `nice` lower numbers are translated first\n     * })\n     * ```\n     * @param {TranslationRequest} request\n     * @returns {Promise<TranslationResponse>}\n     */\n    translate(request) {\n        const {from, to, priority} = request;\n\n        return new Promise(async (resolve, reject) => {\n            try {\n                // Batching key: only requests with the same key can be batched\n                // together. Think same translation model, same options.\n                const key = JSON.stringify({from, to});\n\n                // (Fetching models first because if we would do it between looking\n                // for a batch and making a new one, we end up with a race condition.)\n                const models = await this.backing.getModels(request);\n                \n                // Put the request and its callbacks into a fitting batch\n                this.enqueue({key, models, request, resolve, reject, priority});\n\n                // Tell a worker to pick up the work at some point.\n                this.notify();\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    /**\n     * Prune pending requests by testing each one of them to whether they're\n     * still relevant. Used to prune translation requests from tabs that got\n     * closed.\n     * @param {(request:TranslationRequest) => boolean} filter evaluates to true if request should be removed\n     */\n    remove(filter) {\n        const queue = this.queue;\n\n        this.queue = [];\n\n        queue.forEach(batch => {\n            batch.requests.forEach(({request, resolve, reject}) => {\n                if (filter(request)) {\n                    // Add error.request property to match response.request for\n                    // a resolve() callback. Pretty useful if you don't want to\n                    // do all kinds of Funcion.bind() dances.\n                    reject(Object.assign(new CancelledError('removed by filter'), {request}));\n                    return;\n                }\n\n                this.enqueue({\n                    key: batch.key,\n                    priority: batch.priority,\n                    models: batch.models,\n                    request,\n                    resolve,\n                    reject\n                });\n            });\n        });\n    }\n\n    /**\n     * Internal function used to put a request in a batch that still has space.\n     * Also responsible for keeping the batches in order of priority. Called by\n     * `translate()` but also used when filtering pending requests.\n     * @param {{request:TranslateRequest, models:TranslationModel[], key:String, priority:Number?, resolve:(TranslateResponse)=>any, reject:(Error)=>any}}\n     */\n    enqueue({key, models, request, resolve, reject, priority}) {\n        if (priority === undefined)\n            priority = 0;\n         // Find a batch in the queue that we can add to\n         // (TODO: can we search backwards? that would speed things up)\n        let batch = this.queue.find(batch => {\n            return batch.key === key\n                && batch.priority === priority\n                && batch.requests.length < this.batchSize\n        });\n\n        // No batch or full batch? Queue up a new one\n        if (!batch) {\n            batch = {id: ++this.batchSerial, key, priority, models, requests: []};\n            this.queue.push(batch);\n            this.queue.sort((a, b) => a.priority - b.priority);\n        }\n\n        batch.requests.push({request, resolve, reject});\n    }\n\n    /**\n     * Internal method that uses a worker thread to process a batch. You can\n     * wait for the batch to be done by awaiting this call. You should only\n     * then reuse the worker otherwise you'll just clog up its message queue.\n     */\n    async consumeBatch(batch, worker) {\n        performance.mark('BergamotBatchTranslator.start');\n\n        // Make sure the worker has all necessary models loaded. If not, tell it\n        // first to load them.\n        await Promise.all(batch.models.map(async ({from, to}) => {\n            if (!await worker.hasTranslationModel({from, to})) {\n                const buffers = await this.backing.getTranslationModel({from, to});\n                await worker.loadTranslationModel({from, to}, buffers);\n            }\n        }));\n\n        // Call the worker to translate. Only sending the actually necessary\n        // parts of the batch to avoid trying to send things that don't survive\n        // the message passing API between this thread and the worker thread.\n        const responses = await worker.translate({\n            models: batch.models.map(({from, to}) => ({from, to})),\n            texts: batch.requests.map(({request: {text, html, qualityScores}}) => ({\n                text: text.toString(),\n                html: !!html,\n                qualityScores: !!qualityScores\n            }))\n        });\n\n        // Responses are in! Connect them back to their requests and call their\n        // callbacks.\n        batch.requests.forEach(({request, resolve, reject}, i) => {\n            // TODO: look at response.ok and reject() if it is false\n            resolve({\n                request, // Include request for easy reference? Will allow you\n                         // to specify custom properties and use that to link\n                         // request & response back to each other.\n                ...responses[i] // {target: {text: String}}\n            });\n        });\n        \n        performance.measure('BergamotBatchTranslator', 'BergamotBatchTranslator.start');\n    }\n}\n\n\n/**\n * Translator optimised for interactive use.\n */\nexport class LatencyOptimisedTranslator {\n    /**\n     * @type {TranslatorBacking}\n     */\n    backing;\n\n    /**\n     * @type {Promise<{idle:boolean, worker:Worker, exports:Proxy<TranslationWorker>}>}\n     */\n    worker;\n\n    /**\n     * @type {{request: TranslationRequest, accept:(TranslationResponse), reject:(Error)} | null}\n     */\n    pending;\n\n    /**\n     * @param {{\n     *  cacheSize?: number,\n     *  useNativeIntGemm?: boolean,\n     *  downloadTimeout?: number,\n     *  workerUrl?: string | URL,\n     *  registryUrl?: string\n     *  pivotLanguage?: string?\n     * }} options\n     */\n    constructor(options, backing) {\n        if (!backing)\n            backing = new TranslatorBacking(options);\n\n        this.backing = backing;\n\n        // Exposing the this.loadWorker() returned promise through this.worker\n        // so that you can use that to catch any errors that happened during\n        // loading.\n        this.worker = this.backing.loadWorker().then(worker => ({...worker, idle:true}));\n    }\n\n    /**\n     * Destructor that stops and cleans up.\n     */\n    async delete() {\n        // Cancel pending translation\n        if (this.pending) {\n            this.pending.reject(new CancelledError('translator got deleted'));\n            this.pending = null;\n        }\n\n        // Terminate the worker (I don't care if this fails)\n        try {\n            const {worker} = await this.worker;\n            worker.terminate();\n        } finally {\n            this.worker = null;\n        }\n    }\n    \n    /**\n     * Sets `request` as the next translation to process. If there was already\n     * a translation waiting to be processed, their promise is rejected with a\n     * SupersededError.\n     * @param {TranslationRequest} request\n     * @return {Promise<TranslationResponse>}\n     */\n    translate(request, options) {\n        if (this.pending)\n            this.pending.reject(new SupersededError());\n        \n        return new Promise((accept, reject) => {\n            const pending = {request, accept, reject, options};\n\n            if (options?.signal) {\n                options.signal.addEventListener('abort', e => {\n                    reject(new CancelledError('abort signal'));\n                    if (this.pending === pending)\n                        this.pending = null;\n                });\n            }\n\n            this.pending = pending;\n            this.notify();\n        });\n    }\n    \n    notify() {\n        setTimeout(async () => {\n            if (!this.pending)\n                return;\n\n            // Catch errors such as the worker not working\n            try {\n                // Possibly wait for the worker to finish loading. After it loaded\n                // these calls are pretty much instantaneous.\n                const worker = await this.worker;\n\n                // Is another notify() call hogging the worker? Then stop.\n                if (!worker.idle)\n                    return;\n\n                // Claim the pending translation request.\n                const {request, accept, reject, options} = this.pending;\n                this.pending = null;\n\n                // Mark the worker as occupied\n                worker.idle = false;\n                    \n                try {\n                    const models = await this.backing.getModels(request)\n\n                    await Promise.all(models.map(async ({from, to}) => {\n                        if (!await worker.exports.hasTranslationModel({from, to})) {\n                            const buffers = await this.backing.getTranslationModel({from, to}, {signal: options?.signal});\n                            await worker.exports.loadTranslationModel({from, to}, buffers);\n                        }\n                    }));\n\n                    const {text, html, qualityScores} = request;\n                    const responses = await worker.exports.translate({\n                        models: models.map(({from,to}) => ({from, to})),\n                        texts: [{text, html, qualityScores}]\n                    });\n\n                    accept({request, ...responses[0]});\n                } catch (e) {\n                    reject(e);\n                }\n\n                worker.idle = true;\n\n                // Is there more work to be done? Do another idleRequest\n                if (this.pending)\n                    this.notify();\n            } catch (e) {\n                this.backing.onerror(e);\n            }\n        });\n    }\n}\n","// @ts-check\r\nimport { Cache } from '../../util/cache.js';\r\nimport { BatchTranslator } from '@internetarchive/bergamot-translator/translator.js';\r\nimport { toISO6391 } from '../tts/utils.js';\r\n\r\nexport class TranslationManager {\r\n  /** @type {Cache<{index: string, response: string}>} */\r\n  alreadyTranslated = new Cache(100);\r\n\r\n  /**\r\n  * @typedef {Object} genericModelInfo\r\n  * @property {string} name\r\n  * @property {number} size\r\n  * @property {number} estimatedCompressedSize\r\n  * @property {any} [qualityModel]\r\n  * @property {string} [expectedSha256Hash]\r\n  * @property {string} [modelType]\r\n  */\r\n  /**\r\n  * @type { {[langPair: string] : {model: genericModelInfo, lex: genericModelInfo, vocab: genericModelInfo, quality?: genericModelInfo}} }\r\n  */\r\n  modelRegistry = {};\r\n\r\n  /** @type {Record<key, {promise: Promise<string>, resolve: function, reject: function}>} */\r\n  currentlyTranslating = {}\r\n\r\n  /** @type {Record<string, string>[]} */\r\n  fromLanguages = [];\r\n  /** @type {Record<string, string>[]} */\r\n  toLanguages = [];\r\n\r\n  /** @type {boolean} */\r\n  active = false;\r\n\r\n  publicPath = '';\r\n\r\n  constructor() {\r\n    //TODO Should default to the book language as the first element\r\n    const enModel = {code: \"en\", name: \"English\", type: \"prod\"};\r\n    this.fromLanguages.push(enModel);\r\n    this.toLanguages.push(enModel);\r\n  }\r\n\r\n\r\n  async initWorker() {\r\n    if (this.initPromise) return this.initPromise;\r\n    this.initPromise = new Promise((resolve, reject) => {\r\n      this._initResolve = resolve;\r\n      this._initReject = reject;\r\n    });\r\n    const registryUrl = \"https://cors.archive.org/cors/mozilla-translate-models/firefox_models/\";\r\n    const registryJson = await fetch(registryUrl + \"registry.json\").then(r => r.json());\r\n    for (const language of Object.values(registryJson)) {\r\n      for (const file of Object.values(language)) {\r\n        file.name = registryUrl + file.name;\r\n      }\r\n    }\r\n\r\n    /** @type {BatchTranslator} */\r\n    // Arbitrary setting for number of workers, 1 is already quite fast\r\n    // batchSize from 8 -> 4 for improved performance\r\n    this.translator = new BatchTranslator({\r\n      registryUrl: `data:application/json,${encodeURIComponent(JSON.stringify(registryJson))}`,\r\n      workers: 2,\r\n      batchSize: 4,\r\n      workerUrl: this.publicPath + '/translator-worker.js',\r\n    });\r\n\r\n    const modelType = await this.translator.backing.registry;\r\n    const arr = {}; // unsure if we need to keep track of the files\r\n    for (const obj of Object.values(modelType)) {\r\n      const firstLang = obj['from'];\r\n      const secondLang = obj['to'];\r\n      const fromModelType = obj['files'];\r\n      arr[`${firstLang}${secondLang}`] = fromModelType;\r\n      // Assuming that all of the languages loaded from the registryUrl inside @internetarchive/bergamot-translator/translator.js are prod\r\n      // List of dev models found here https://github.com/mozilla/firefox-translations-models/tree/main/models/base\r\n      // There are also differences between the model types in the repo above here: https://github.com/mozilla/firefox-translations-models?tab=readme-ov-file#firefox-translations-models\r\n      if (firstLang !== \"en\") {\r\n        this.fromLanguages.push({code: firstLang, name: toISO6391(firstLang, true), type: \"prod\"});\r\n      }\r\n      if (secondLang !== \"en\") {\r\n        this.toLanguages.push({code: secondLang, name: toISO6391(secondLang, true), type: \"prod\"});\r\n      }\r\n    }\r\n    this._initResolve([this.modelRegistry]);\r\n    return this.initPromise;\r\n  }\r\n\r\n  /**\r\n   * Targets the page and paragraph of a text layer to create a translation from the \"fromLang\" to the \"toLang\". Tries to force order in translation by using the pageIndex (+1000 if the current page is not visible) and paragraphIndex\r\n   * @param {string} fromLang\r\n   * @param {string} toLang\r\n   * @param {string} pageIndex\r\n   * @param {number} paragraphIndex\r\n   * @param {string} text\r\n   * @param {number} priority\r\n   * @return {Promise<string>} translated text\r\n   */\r\n\r\n  getTranslation = async (fromLang, toLang, pageIndex, paragraphIndex, text, priority) => {\r\n    this.active = true;\r\n    if (fromLang == toLang || !fromLang || !toLang) {\r\n      return;\r\n    }\r\n    const key = `${fromLang}${toLang}-${pageIndex}:${paragraphIndex}`;\r\n    const cachedEntry = this.alreadyTranslated.entries.find(x => x.index == key);\r\n\r\n    if (cachedEntry) {\r\n      return cachedEntry.response;\r\n    }\r\n\r\n    if (key in this.currentlyTranslating) {\r\n      return this.currentlyTranslating[key].promise;\r\n    }\r\n\r\n    let _resolve = null;\r\n    let _reject = null;\r\n    const promise = new Promise((res, rej) => {\r\n      _resolve = res;\r\n      _reject = rej;\r\n    });\r\n\r\n    this.currentlyTranslating[key] = {\r\n      promise,\r\n      resolve: _resolve,\r\n      reject: _reject,\r\n    };\r\n\r\n    if (!text) {\r\n      this.currentlyTranslating[key].reject(\"No text was provided\");\r\n      return promise;\r\n    }\r\n    this.translator.translate({\r\n      to: toLang,\r\n      from: fromLang,\r\n      text: text,\r\n      html: false,\r\n      priority: priority,\r\n    }).then((resp) => {\r\n      const response = resp;\r\n      this.currentlyTranslating[key].resolve(response.target.text);\r\n      this.alreadyTranslated.add({index: key, response: response.target.text});\r\n      delete this.currentlyTranslating[key];\r\n    });\r\n\r\n    return promise;\r\n  }\r\n\r\n  /**\r\n   * Checks and updates the status of a model that is currently being retreived from IA\r\n   * @param {string} fromLanguage\r\n   * @param {string} toLanguage\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  getTranslationModel = async(fromLanguage, toLanguage) => {\r\n    return this.translator.backing.getTranslationModel({from: fromLanguage, to: toLanguage})\r\n      .catch((err) => {\r\n        console.error(`An error occurred while trying to retreive the ${fromLanguage}-${toLanguage} model`);\r\n      });\r\n  }\r\n}\r\n","// @ts-check\r\nimport { html, LitElement } from 'lit';\r\nimport { BookReaderPlugin } from '../../BookReaderPlugin.js';\r\nimport { customElement, property } from 'lit/decorators.js';\r\nimport { TranslationManager } from \"./TranslationManager.js\";\r\nimport { toISO6391 } from '../tts/utils.js';\r\nimport { sortBy } from '../../../src/BookReader/utils.js';\r\nimport '@internetarchive/ia-activity-indicator/ia-activity-indicator.js';\r\n\r\n// @ts-ignore\r\nconst BookReader = /** @type {typeof import('@/src/BookReader.js').default} */(window.BookReader);\r\n\r\nexport class TranslatePlugin extends BookReaderPlugin {\r\n\r\n  options = {\r\n    enabled: true,\r\n\r\n    /** @type {string | import('lit').TemplateResult} */\r\n    panelDisclaimerText: \"Translations are in alpha\",\r\n  }\r\n\r\n  /** @type {TranslationManager} */\r\n  translationManager = new TranslationManager();\r\n\r\n  /** @type {Worker}*/\r\n  worker;\r\n\r\n  /**\r\n   * Contains the list of languages available to translate to\r\n   * @type {string[]}\r\n   */\r\n  toLanguages = [];\r\n\r\n  /**\r\n   * Current language code that is being translated From. Defaults to EN currently\r\n   * @type {!string}\r\n   */\r\n  langFromCode;\r\n\r\n  /**\r\n   * Current language code that is being translated To\r\n   * @type {!string}\r\n   */\r\n  langToCode;\r\n  /**\r\n   * @type {BrTranslatePanel} _panel - Represents a panel used in the plugin.\r\n   * The specific type and purpose of this panel should be defined based on its usage.\r\n   */\r\n  _panel;\r\n\r\n  /**\r\n   * @type {boolean} userToggleTranslate - Checks if user has initiated translation\r\n   * Should synchronize with the state of TranslationManager's active state\r\n   */\r\n  userToggleTranslate;\r\n\r\n  /**\r\n   * @type {boolean} loadingModel - Shows loading animation while downloading lang model\r\n   */\r\n  loadingModel = true;\r\n\r\n\r\n  async init() {\r\n    const currentLanguage = toISO6391(this.br.options.bookLanguage.replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\"));\r\n    this.langFromCode = currentLanguage ?? \"en\";\r\n\r\n    if (!this.options.enabled) {\r\n      return;\r\n    }\r\n\r\n    this.translationManager.publicPath = this.br.options.imagesBaseURL.replace(/\\/+$/, '') + '/..';\r\n\r\n    /**\r\n     * @param {*} ev\r\n     * @param {object} eventProps\r\n    */\r\n    this.br.on('textLayerRendered', async (_, {pageIndex, pageContainer}) => {\r\n      // Stops invalid models from running, also prevents translation on page load\r\n      // TODO check if model has finished loading or if it exists\r\n      if (!this.translationManager) {\r\n        return;\r\n      }\r\n      if (this.translationManager.active) {\r\n        const pageElement = pageContainer.$container[0];\r\n        this.translateRenderedLayer(pageElement);\r\n      }\r\n    });\r\n\r\n    /**\r\n     * @param {*} ev\r\n     * @param {object} eventProps\r\n    */\r\n    this.br.on('pageVisible', (_, {pageContainerEl}) => {\r\n      if (!this.translationManager.active) {\r\n        return;\r\n      }\r\n      for (const paragraphEl of pageContainerEl.querySelectorAll('.BRtranslateLayer > .BRparagraphElement')) {\r\n        if (paragraphEl.textContent) {\r\n          this.fitVisiblePage(paragraphEl);\r\n        }\r\n      }\r\n    });\r\n\r\n    await this.translationManager.initWorker();\r\n    // Note await above lets _render function properly, since it gives the browser\r\n    // time to render the rest of bookreader, which _render depends on\r\n    this.langToCode = this.translationManager.toLanguages[0].code;\r\n    this._render();\r\n  }\r\n\r\n  /** @param {HTMLElement} page*/\r\n  getParagraphsOnPage = (page) => {\r\n    return page ? Array.from(page.querySelectorAll(\".BRtextLayer > .BRparagraphElement\")) : [];\r\n  }\r\n\r\n  translateActivePageContainerElements() {\r\n    const currentlyActiveContainers = this.br.getActivePageContainerElements();\r\n    const visiblePageContainers = currentlyActiveContainers.filter((element) => {\r\n      return element.classList.contains('BRpage-visible');\r\n    });\r\n    const hiddenPageContainers = currentlyActiveContainers.filter((element) => {\r\n      return !element.classList.contains('BRpage-visible');\r\n    });\r\n\r\n    for (const page of visiblePageContainers) {\r\n      this.translateRenderedLayer(page, 0);\r\n    }\r\n    for (const loadingPage of hiddenPageContainers) {\r\n      this.translateRenderedLayer(loadingPage, 1000);\r\n    }\r\n  }\r\n\r\n  /** @param {HTMLElement} page */\r\n  async translateRenderedLayer(page, priority) {\r\n    // Do not run translation if in thumbnail mode or if user did not initiate transations\r\n    if (this.br.mode == this.br.constModeThumb || !this.userToggleTranslate || this.langFromCode == this.langToCode) {\r\n      return;\r\n    }\r\n\r\n    const pageIndex = page.dataset.index;\r\n\r\n    let pageTranslationLayer;\r\n    if (!page.querySelector('.BRPageLayer.BRtranslateLayer')) {\r\n      pageTranslationLayer = document.createElement('div');\r\n      pageTranslationLayer.classList.add('BRPageLayer', 'BRtranslateLayer', 'BRtranslateLayerLoading');\r\n      pageTranslationLayer.setAttribute('lang', `${this.langToCode}`);\r\n      page.prepend(pageTranslationLayer);\r\n    } else {\r\n      pageTranslationLayer = page.querySelector('.BRPageLayer.BRtranslateLayer');\r\n    }\r\n\r\n    const textLayerElement = page.querySelector('.BRtextLayer');\r\n    textLayerElement.classList.add('showingTranslation');\r\n    $(pageTranslationLayer).css({\r\n      \"width\": $(textLayerElement).css(\"width\"),\r\n      \"height\": $(textLayerElement).css(\"height\"),\r\n      \"transform\": $(textLayerElement).css(\"transform\"),\r\n      \"pointer-events\": $(textLayerElement).css(\"pointer-events\"),\r\n      \"z-index\": 3,\r\n    });\r\n    const paragraphs = this.getParagraphsOnPage(page);\r\n\r\n    const paragraphTranslationPromises = paragraphs.map(async (paragraph, pidx) => {\r\n      let translatedParagraph = page.querySelector(`[data-translate-index='${pageIndex}-${pidx}']`);\r\n      if (!translatedParagraph) {\r\n        translatedParagraph = document.createElement('p');\r\n        // set data-translate-index on the placeholder\r\n        translatedParagraph.setAttribute('data-translate-index', `${pageIndex}-${pidx}`);\r\n        translatedParagraph.className = 'BRparagraphElement';\r\n        const originalParagraphStyle = paragraphs[pidx];\r\n        // check text selection paragraphs for header/footer roles\r\n        if (paragraph.classList.contains('ocr-role-header-footer')) {\r\n          translatedParagraph.ariaHidden = \"true\";\r\n          translatedParagraph.classList.add('ocr-role-header-footer');\r\n        }\r\n        const fontSize = `${parseInt($(originalParagraphStyle).css(\"font-size\"))}px`;\r\n\r\n        $(translatedParagraph).css({\r\n          \"margin-left\": $(originalParagraphStyle).css(\"margin-left\"),\r\n          \"margin-top\": $(originalParagraphStyle).css(\"margin-top\"),\r\n          \"top\": $(originalParagraphStyle).css(\"top\"),\r\n          \"height\": $(originalParagraphStyle).css(\"height\"),\r\n          \"width\": $(originalParagraphStyle).css(\"width\"),\r\n          \"font-size\": fontSize,\r\n        });\r\n\r\n        // Note: We'll likely want to switch to using the same logic as\r\n        // TextSelectionPlugin's selection, which allows for e.g. click-to-flip\r\n        // to work simultaneously with text selection.\r\n        translatedParagraph.addEventListener('mousedown', (e) => {\r\n          e.stopPropagation();\r\n          e.stopImmediatePropagation();\r\n        });\r\n\r\n        translatedParagraph.addEventListener('mouseup', (e) => {\r\n          e.stopPropagation();\r\n          e.stopImmediatePropagation();\r\n        });\r\n\r\n        translatedParagraph.addEventListener('dragstart', (e) =>{\r\n          e.preventDefault();\r\n        });\r\n        pageTranslationLayer.append(translatedParagraph);\r\n      }\r\n\r\n      if (paragraph.textContent.length !== 0) {\r\n        const pagePriority = parseFloat(pageIndex) + priority + pidx;\r\n        this.translationManager.getTranslationModel(this.langFromCode, this.langToCode).then(() => {\r\n          this._panel.loadingModel = false;\r\n          this.loadingModel = false;\r\n        });\r\n        const translatedText = await this.translationManager.getTranslation(this.langFromCode, this.langToCode, pageIndex, pidx, paragraph.textContent, pagePriority);\r\n        // prevent duplicate spans from appearing if exists\r\n        translatedParagraph.firstElementChild?.remove();\r\n\r\n        const firstWordSpacing = paragraphs[pidx]?.firstChild?.firstChild;\r\n        const createSpan = document.createElement('span');\r\n        createSpan.className = 'BRlineElement';\r\n        createSpan.textContent = translatedText;\r\n        translatedParagraph.appendChild(createSpan);\r\n\r\n        $(createSpan).css({\r\n          \"text-indent\": $(firstWordSpacing).css('padding-left'),\r\n        });\r\n        if (page.classList.contains('BRpage-visible')) {\r\n          this.fitVisiblePage(translatedParagraph);\r\n        }\r\n      }\r\n    });\r\n    await Promise.all(paragraphTranslationPromises);\r\n    this.br.trigger('translateLayerRendered', {\r\n      leafIndex: pageIndex,\r\n      translateLayer: pageTranslationLayer,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the translation layers for a specific leaf index.\r\n   * @param {number} leafIndex\r\n   * @returns {Promise<HTMLElement[]>}\r\n   */\r\n  async getTranslateLayers(leafIndex) {\r\n    const pageContainerElements = this.br.getActivePageContainerElementsForIndex(leafIndex);\r\n    const translateLayer = $(pageContainerElements).filter(`[data-index='${leafIndex}']`).find('.BRtranslateLayer');\r\n    if (translateLayer.length) return translateLayer.toArray();\r\n\r\n    return new Promise((res, rej) => {\r\n      const handler = async (_, extraParams) => {\r\n        if (extraParams.leafIndex == leafIndex) {\r\n          this.br.off('translateLayerRendered', handler); // remember to detach translateLayer\r\n          res([extraParams.translateLayer]);\r\n        }\r\n      };\r\n      this.br.on('translateLayerRendered', handler);\r\n    });\r\n  }\r\n\r\n  clearAllTranslations() {\r\n    document.querySelectorAll('.BRtranslateLayer').forEach(el => el.remove());\r\n  }\r\n\r\n  /**\r\n   * @param {Element} paragEl\r\n   */\r\n  fitVisiblePage(paragEl) {\r\n    // For some reason, Chrome does not detect the transform property for the translation + text layers\r\n    // Could not get it to fetch the transform value using $().css method\r\n    // Oddly enough the value is retrieved if using .style.transform instead?\r\n    const translateLayerEl = paragEl.parentElement;\r\n    if ($(translateLayerEl).css('transform') == 'none') {\r\n      const pageNumber = paragEl.getAttribute('data-translate-index').split('-')[0];\r\n      /** @type {HTMLElement} selectionTransform */\r\n      const textLayerEl = document.querySelector(`[data-index='${pageNumber}'] .BRtextLayer`);\r\n      $(translateLayerEl).css({'transform': textLayerEl.style.transform});\r\n    }\r\n\r\n    const originalFontSize = parseInt($(paragEl).css(\"font-size\"));\r\n    let adjustedFontSize = originalFontSize;\r\n    while (paragEl.clientHeight < paragEl.scrollHeight && adjustedFontSize > 0) {\r\n      adjustedFontSize--;\r\n      $(paragEl).css({ \"font-size\": `${adjustedFontSize}px` });\r\n    }\r\n\r\n    const textHeight = paragEl.firstElementChild.clientHeight;\r\n    const scrollHeight = paragEl.scrollHeight;\r\n    const fits = textHeight < scrollHeight;\r\n    if (fits) {\r\n      const lines = textHeight / adjustedFontSize;\r\n      // Line heights for smaller paragraphs occasionally need a minor adjustment\r\n      const newLineHeight = scrollHeight / lines;\r\n      $(paragEl).css({\r\n        \"line-height\" : `${newLineHeight}px`,\r\n        \"overflow\": \"visible\",\r\n      });\r\n    }\r\n  }\r\n\r\n  handleFromLangChange = async (e) => {\r\n    this.clearAllTranslations();\r\n    const selectedLangFrom = e.detail.value;\r\n\r\n    // Update the from language\r\n    this.langFromCode = selectedLangFrom;\r\n    this._panel.requestUpdate();\r\n\r\n    // Add 'From' language to 'To' list if not already present\r\n    if (!this.translationManager.toLanguages.some(lang => lang.code === selectedLangFrom)) {\r\n      this.translationManager.toLanguages.push({\r\n        code: selectedLangFrom,\r\n        name: this.translationManager.fromLanguages.find((entry) => entry.code == selectedLangFrom).name,\r\n      });\r\n    }\r\n\r\n    // Update the 'To' languages list and set the correct 'To' language\r\n    this._panel.toLanguages = this.translationManager.toLanguages;\r\n\r\n    console.log(this.langFromCode, this.langToCode);\r\n    this._render();\r\n    if (this.langFromCode !== this.langToCode) {\r\n      this.translateActivePageContainerElements();\r\n    }\r\n  }\r\n\r\n  handleToLangChange = async (e) => {\r\n    this.clearAllTranslations();\r\n    this.langToCode = e.detail.value;\r\n    this._render();\r\n    this.translateActivePageContainerElements();\r\n  }\r\n\r\n  handleToggleTranslation = async () => {\r\n    this.userToggleTranslate = !this.userToggleTranslate;\r\n    this.translationManager.active = this.userToggleTranslate;\r\n    this._render();\r\n    if (!this.userToggleTranslate) {\r\n      this.clearAllTranslations();\r\n      this.br.trigger('translationDisabled', { });\r\n    } else {\r\n      this.br.trigger('translationEnabled', { });\r\n      this.translateActivePageContainerElements();\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Update translation side menu\r\n  */\r\n  _render() {\r\n    this.br.shell.menuProviders['translate'] = {\r\n      id: 'translate',\r\n      icon: html`<img src='${this.br.options.imagesBaseURL}/translate.svg' width=\"26\"/>`,\r\n      label: 'Translate',\r\n      component: html`<br-translate-panel\r\n        @connected=\"${e => {\r\n        this._panel = e.target;\r\n        this._panel.fromLanguages = this.translationManager.fromLanguages;\r\n        this._panel.toLanguages = this.translationManager.toLanguages;\r\n        this._panel.userTranslationActive = this.userToggleTranslate;\r\n        this._panel.detectedToLang = this.langToCode;\r\n        this._panel.detectedFromLang = this.langFromCode;\r\n        this._panel.loadingModel = this.loadingModel;\r\n      }\r\n      }\"\r\n        @langFromChanged=\"${this.handleFromLangChange}\"\r\n        @langToChanged=\"${this.handleToLangChange}\"\r\n        @toggleTranslation=\"${this.handleToggleTranslation}\"\r\n        .fromLanguages=\"${this.translationManager.fromLanguages}\"\r\n        .toLanguages=\"${this.translationManager.toLanguages}\"\r\n        .disclaimerMessage=\"${this.options.panelDisclaimerText}\"\r\n        .userTranslationActive=${this.userToggleTranslate}\r\n        .detectedFromLang=${this.langFromCode}\r\n        .detectedToLang=${this.langToCode}\r\n        .loadingModel=${this.loadingModel}\r\n        class=\"translate-panel\"\r\n      />`,\r\n    };\r\n    this.br.shell.updateMenuContents();\r\n  }\r\n}\r\nBookReader?.registerPlugin('translate', TranslatePlugin);\r\n\r\n@customElement('br-translate-panel')\r\nexport class BrTranslatePanel extends LitElement {\r\n  @property({ type: Array }) fromLanguages = []; // List of obj {code, name}\r\n  @property({ type: Array }) toLanguages = []; // List of obj {code, name}\r\n  @property({ type: String }) prevSelectedLang = ''; // Tracks the previous selected language for the \"To\" dropdown\r\n  @property({ type: String }) disclaimerMessage = '';\r\n  @property({ type: Boolean }) userTranslationActive = false;\r\n  @property({ type: String }) detectedFromLang = '';\r\n  @property({ type: String }) detectedToLang = '';\r\n  @property({ type: Boolean }) loadingModel;\r\n\r\n  /** @override */\r\n  createRenderRoot() {\r\n    // Disable shadow DOM; that would require a huge rejiggering of CSS\r\n    return this;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this.dispatchEvent(new CustomEvent('connected'));\r\n  }\r\n\r\n  render() {\r\n    return html`<div class=\"app\" style=\"margin-top: 5%;padding-right: 5px;\">\r\n      <div\r\n        class=\"disclaimer\"\r\n        id=\"disclaimerMessage\"\r\n        style=\"background-color: rgba(255,255,255,0.1);padding: 10px;border-radius: 8px;font-size: 12px;margin-bottom: 10px;color: rgba(255,255,255, 0.9);\"\r\n      >${this.disclaimerMessage}</div>\r\n\r\n      <div class=\"panel panel--to\" style=\"padding: 0 10px;\">\r\n        <label>\r\n          <span style=\"font-size: 12px;color: #ccc;\">Translate To</span>\r\n          <select id=\"lang-to\" name=\"to\" class=\"lang-select\" style=\"display:block; width:100%;\" @change=\"${this._onLangToChange}\">\r\n          ${sortBy(this.toLanguages, ((lang) => lang.name.toLowerCase()\r\n    )).map((lang) => {\r\n      return html`<option value=\"${lang.code}\" \r\n                        ?selected=${lang.code == this.detectedToLang}\r\n                        > ${lang.name ? lang.name : lang.code} </option>`;\r\n    })\r\n          }\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"panel panel--start\" style=\"text-align: right;padding: 0 10px;/*! font-size: 18px; */margin-top: 10px;\">\r\n            <button class=\"start-translation-brn\" @click=\"${this._toggleTranslation}\">\r\n              ${this.userTranslationActive ? \"Stop Translating\" : \"Translate\"}\r\n            </button>\r\n      </div>\r\n\r\n      <div class=\"panel panel--from\" style=\"font-size: 12px;color: #ccc;text-align: center;padding: 8px 10px;\">\r\n        <details style=\"display: contents\">\r\n          <summary style=\"text-decoration: underline white; cursor:pointer; display:inline-block\"> \r\n            <i>\r\n              Source: ${this._getLangName(this.detectedFromLang)} ${this.prevSelectedLang ? \"\" : \"(detected)\"} \r\n            </i> Change \r\n          </summary>\r\n          <select id=\"lang-from\" name=\"from\" class=\"lang-select\" value=${this.detectedFromLang} @change=\"${this._onLangFromChange}\" style=\"width:65%; margin-top: 3%; margin-bottom: 3%\">\r\n          ${sortBy(this.fromLanguages, ((lang) => lang.name.toLowerCase()\r\n          )).map((lang) => {\r\n            return html`<option value=\"${lang.code}\"\r\n                      ?selected=${lang.code == this.detectedFromLang}\r\n                      >${lang.name ? lang.name : lang.code} </option>`;\r\n          })\r\n          }\r\n          </select>\r\n      </details>\r\n      <div class=\"footer\" id=\"status\" style=\"margin-top:5%\">\r\n      ${this._statusWarning()}\r\n      </div>\r\n\r\n      <div class=\"lang-models-loading\"> \r\n      ${this._languageModelStatus()}\r\n      </div>\r\n    </div>`;\r\n  }\r\n  _onLangFromChange(event) {\r\n    const langFromChangedEvent = new CustomEvent('langFromChanged', {\r\n      detail: { value: event.target.value },\r\n      bubbles: true,\r\n      composed: true,\r\n    });\r\n    this.dispatchEvent(langFromChangedEvent);\r\n\r\n    // Update the prevSelectedLang if \"To\" is different from \"From\"\r\n    if (this._getSelectedLang('to') !== this._getSelectedLang('from')) {\r\n      this.prevSelectedLang = this._getSelectedLang('from');\r\n    }\r\n    this.loadingModel = true;\r\n    this.detectedFromLang = event.target.value;\r\n  }\r\n\r\n  _onLangToChange(event) {\r\n    const langToChangedEvent = new CustomEvent('langToChanged', {\r\n      detail: { value: event.target.value },\r\n      bubbles: true,\r\n      composed: true,\r\n    });\r\n    this.dispatchEvent(langToChangedEvent);\r\n\r\n    // Update the prevSelectedLang if \"To\" is different from \"From\"\r\n    if (this._getSelectedLang('from') !== event.target.value) {\r\n      this.prevSelectedLang = this._getSelectedLang('from');\r\n    }\r\n    this.loadingModel = true;\r\n    this.detectedToLang = event.target.value;\r\n  }\r\n\r\n  _getSelectedLang(type) {\r\n    /** @type {HTMLSelectElement} */\r\n    const dropdown = this.querySelector(`#lang-${type}`);\r\n    return dropdown ? dropdown.value : '';\r\n  }\r\n\r\n  _getLangName(code) {\r\n    const lang = [...this.fromLanguages, ...this.toLanguages].find(lang => lang.code === code);\r\n    return lang ? lang.name : '';\r\n  }\r\n\r\n  _toggleTranslation(event) {\r\n    const toggleTranslateEvent = new CustomEvent('toggleTranslation', {\r\n      detail: {value: event.target.value},\r\n      bubbles: true,\r\n      composed:true,\r\n    });\r\n    this.userTranslationActive = !this.userTranslationActive;\r\n    this.dispatchEvent(toggleTranslateEvent);\r\n  }\r\n\r\n  // TODO: Hardcoded warning message for now but should add more statuses\r\n  _statusWarning() {\r\n    if (this.detectedFromLang == this.detectedToLang) {\r\n      return \"Translate To language is the same as the Source language\";\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  _languageModelStatus() {\r\n    if (this.userTranslationActive) {\r\n      if (this.loadingModel) {\r\n        return html`\r\n        <ia-activity-indicator mode=\"processing\" style=\"display:block; width: 40px; height: 40px; margin: 0 auto;\"></ia-activity-indicator>\r\n        <p>Downloading language model</p>\r\n        `;\r\n      }\r\n      return html`<p>Language model loaded</p>`;\r\n    }\r\n    return \"\";\r\n  }\r\n}\r\n","// src/data.ts\nvar data_default = [\n  [\"Serbian\", \"\\u0441\\u0440\\u043F\\u0441\\u043A\\u0438 \\u0458\\u0435\\u0437\\u0438\\u043A\", \"sr\", \"srp\", \"srp\"],\n  [\"Romanian, Moldavian, Moldovan\", \"Rom\\xE2n\\u0103\", \"ro\", \"ron\", \"rum\"],\n  [\"Sichuan Yi, Nuosu\", \"\\uA188\\uA320\\uA4BF Nuosuhxop\", \"ii\", \"iii\", \"iii\"],\n  [\"Tahitian\", \"Reo Tahiti\", \"ty\", \"tah\", \"tah\"],\n  [\"Tagalog\", \"Wikang Tagalog\", \"tl\", \"tgl\", \"tgl\"],\n  [\"Yiddish\", \"\\u05D9\\u05D9\\u05B4\\u05D3\\u05D9\\u05E9\", \"yi\", \"yid\", \"yid\"],\n  [\"Akan\", \"Akan\", \"ak\", \"aka\", \"aka\"],\n  [\"Malay\", \"Bahasa Melayu, \\u0628\\u0647\\u0627\\u0633 \\u0645\\u0644\\u0627\\u064A\\u0648\", \"ms\", \"msa\", \"may\"],\n  [\"Arabic\", \"\\u0627\\u0644\\u0639\\u0631\\u0628\\u064A\\u0629\", \"ar\", \"ara\", \"ara\"],\n  [\"Norwegian\", \"Norsk\", \"no\", \"nor\", \"nor\"],\n  [\"Ojibwa\", \"\\u140A\\u14C2\\u1511\\u14C8\\u142F\\u14A7\\u140E\\u14D0\", \"oj\", \"oji\", \"oji\"],\n  [\"Fulah\", \"Fulfulde, Pulaar, Pular\", \"ff\", \"ful\", \"ful\"],\n  [\"Persian\", \"\\u0641\\u0627\\u0631\\u0633\\u06CC\", \"fa\", \"fas\", \"per\"],\n  [\"Albanian\", \"Shqip\", \"sq\", \"sqi\", \"alb\"],\n  [\"Aymara\", \"aymar aru\", \"ay\", \"aym\", \"aym\"],\n  [\"Azerbaijani\", \"az\\u0259rbaycan dili\", \"az\", \"aze\", \"aze\"],\n  [\"Chinese\", \"\\u4E2D\\u6587 (Zh\\u014Dngw\\xE9n), \\u6C49\\u8BED, \\u6F22\\u8A9E\", \"zh\", \"zho\", \"chi\"],\n  [\"Cree\", \"\\u14C0\\u1426\\u1403\\u152D\\u140D\\u140F\\u1423\", \"cr\", \"cre\", \"cre\"],\n  [\"Estonian\", \"eesti, eesti keel\", \"et\", \"est\", \"est\"],\n  [\"Guaran\\xED\", \"Ava\\xF1e'\\u1EBD\", \"gn\", \"grn\", \"grn\"],\n  [\"Inupiaq\", \"I\\xF1upiaq, I\\xF1upiatun\", \"ik\", \"ipk\", \"ipk\"],\n  [\"Inuktitut\", \"\\u1403\\u14C4\\u1483\\u144E\\u1450\\u1466\", \"iu\", \"iku\", \"iku\"],\n  [\"Kanuri\", \"Kanuri\", \"kr\", \"kau\", \"kau\"],\n  [\"Komi\", \"\\u043A\\u043E\\u043C\\u0438 \\u043A\\u044B\\u0432\", \"kv\", \"kom\", \"kom\"],\n  [\"Kongo\", \"Kikongo\", \"kg\", \"kon\", \"kon\"],\n  [\"Kurdish\", \"Kurd\\xEE, \\u0623\\u06C7\\u0632\\u0628\\u06D0\\u0643\", \"ku\", \"kur\", \"kur\"],\n  [\"Latvian\", \"latvie\\u0161u valoda\", \"lv\", \"lav\", \"lav\"],\n  [\"Malagasy\", \"fiteny malagasy\", \"mg\", \"mlg\", \"mlg\"],\n  [\"Mongolian\", \"\\u041C\\u043E\\u043D\\u0433\\u043E\\u043B \\u0445\\u044D\\u043B\", \"mn\", \"mon\", \"mon\"],\n  [\"Oromo\", \"Afaan Oromoo\", \"om\", \"orm\", \"orm\"],\n  [\"Pashto, Pushto\", \"\\u067E\\u069A\\u062A\\u0648\", \"ps\", \"pus\", \"pus\"],\n  [\"Quechua\", \"Runa Simi, Kichwa\", \"qu\", \"que\", \"que\"],\n  [\"Sardinian\", \"sardu\", \"sc\", \"srd\", \"srd\"],\n  [\"Swahili\", \"Kiswahili\", \"sw\", \"swa\", \"swa\"],\n  [\"Uzbek\", \"O\\u02BBzbek, \\u040E\\u0437\\u0431\\u0435\\u043A, \", \"uz\", \"uzb\", \"uzb\"],\n  [\"Zhuang, Chuang\", \"Sa\\u026F cue\\u014B\\u0185, Saw cuengh\", \"za\", \"zha\", \"zha\"],\n  [\"Bislama\", \"Bislama\", \"bi\", \"bis\", \"bis\"],\n  [\"Norwegian Bokm\\xE5l\", \"Norsk Bokm\\xE5l\", \"nb\", \"nob\", \"nob\"],\n  [\"Norwegian Nynorsk\", \"Norsk Nynorsk\", \"nn\", \"nno\", \"nno\"],\n  [\"Indonesian\", \"Bahasa Indonesia\", \"id\", \"ind\", \"ind\"],\n  [\"Twi\", \"Twi\", \"tw\", \"twi\", \"twi\"],\n  [\"Esperanto\", \"Esperanto\", \"eo\", \"epo\", \"epo\"],\n  [\"Interlingua\", \"Interlingua\", \"ia\", \"ina\", \"ina\"],\n  [\"Interlingue\", \"Originally called Occidental; then Interlingue after WWII\", \"ie\", \"ile\", \"ile\"],\n  [\"Ido\", \"Ido\", \"io\", \"ido\", \"ido\"],\n  [\"Volap\\xFCk\", \"Volap\\xFCk\", \"vo\", \"vol\", \"vol\"],\n  [\"Bihari languages\", \"\\u092D\\u094B\\u091C\\u092A\\u0941\\u0930\\u0940\", \"bh\", \"bih\", \"bih\"],\n  [\"Hebrew (modern)\", \"\\u05E2\\u05D1\\u05E8\\u05D9\\u05EA\", \"he\", \"heb\", \"heb\"],\n  [\"Sanskrit\", \"\\u0938\\u0902\\u0938\\u094D\\u0915\\u0943\\u0924\\u092E\\u094D\", \"sa\", \"san\", \"san\"],\n  [\"Church Slavic, Church Slavonic, Old Church Slavonic, Old Slavonic, Old Bulgarian\", \"\\u0469\\u0437\\u044B\\u043A\\u044A \\u0441\\u043B\\u043E\\u0432\\u0463\\u043D\\u044C\\u0441\\u043A\\u044A\", \"cu\", \"chu\", \"chu\"],\n  [\"Pali\", \"\\u092A\\u093E\\u0934\\u093F\", \"pi\", \"pli\", \"pli\"],\n  [\"Avestan\", \"avesta\", \"ae\", \"ave\", \"ave\"],\n  [\"Latin\", \"latine, lingua latina\", \"la\", \"lat\", \"lat\"],\n  [\"Armenian\", \"\\u0540\\u0561\\u0575\\u0565\\u0580\\u0565\\u0576\", \"hy\", \"hye\", \"arm\"],\n  [\"Swati\", \"SiSwati\", \"ss\", \"ssw\", \"ssw\"],\n  [\"Tibetan\", \"\\u0F56\\u0F7C\\u0F51\\u0F0B\\u0F61\\u0F72\\u0F42\", \"bo\", \"bod\", \"tib\"],\n  [\"South Ndebele\", \"isiNdebele\", \"nr\", \"nbl\", \"nbl\"],\n  [\"Slovene\", \"Slovenski Jezik, Sloven\\u0161\\u010Dina\", \"sl\", \"slv\", \"slv\"],\n  [\"Oriya\", \"\\u0B13\\u0B21\\u0B3C\\u0B3F\\u0B06\", \"or\", \"ori\", \"ori\"],\n  [\"North Ndebele\", \"isiNdebele\", \"nd\", \"nde\", \"nde\"],\n  [\"Nauru\", \"Dorerin Naoero\", \"na\", \"nau\", \"nau\"],\n  [\"Maori\", \"te reo M\\u0101ori\", \"mi\", \"mri\", \"mao\"],\n  [\"Marathi\", \"\\u092E\\u0930\\u093E\\u0920\\u0940\", \"mr\", \"mar\", \"mar\"],\n  [\"Luba-Katanga\", \"Kiluba\", \"lu\", \"lub\", \"lub\"],\n  [\"Rundi\", \"Ikirundi\", \"rn\", \"run\", \"run\"],\n  [\"Central Khmer\", \"\\u1781\\u17D2\\u1798\\u17C2\\u179A, \\u1781\\u17C1\\u1798\\u179A\\u1797\\u17B6\\u179F\\u17B6, \\u1797\\u17B6\\u179F\\u17B6\\u1781\\u17D2\\u1798\\u17C2\\u179A\", \"km\", \"khm\", \"khm\"],\n  [\"Western Frisian\", \"Frysk\", \"fy\", \"fry\", \"fry\"],\n  [\"Bengali\", \"\\u09AC\\u09BE\\u0982\\u09B2\\u09BE\", \"bn\", \"ben\", \"ben\"],\n  [\"Avaric\", \"\\u0430\\u0432\\u0430\\u0440 \\u043C\\u0430\\u0446\\u04C0, \\u043C\\u0430\\u0433\\u04C0\\u0430\\u0440\\u0443\\u043B \\u043C\\u0430\\u0446\\u04C0\", \"av\", \"ava\", \"ava\"],\n  [\"Abkhazian\", \"\\u0430\\u04A7\\u0441\\u0443\\u0430 \\u0431\\u044B\\u0437\\u0448\\u04D9\\u0430, \\u0430\\u04A7\\u0441\\u0448\\u04D9\\u0430\", \"ab\", \"abk\", \"abk\"],\n  [\"Afar\", \"Afaraf\", \"aa\", \"aar\", \"aar\"],\n  [\"Afrikaans\", \"Afrikaans\", \"af\", \"afr\", \"afr\"],\n  [\"Amharic\", \"\\u12A0\\u121B\\u122D\\u129B\", \"am\", \"amh\", \"amh\"],\n  [\"Aragonese\", \"aragon\\xE9s\", \"an\", \"arg\", \"arg\"],\n  [\"Assamese\", \"\\u0985\\u09B8\\u09AE\\u09C0\\u09AF\\u09BC\\u09BE\", \"as\", \"asm\", \"asm\"],\n  [\"Bambara\", \"bamanankan\", \"bm\", \"bam\", \"bam\"],\n  [\"Bashkir\", \"\\u0431\\u0430\\u0448\\u04A1\\u043E\\u0440\\u0442 \\u0442\\u0435\\u043B\\u0435\", \"ba\", \"bak\", \"bak\"],\n  [\"Basque\", \"euskara, euskera\", \"eu\", \"eus\", \"baq\"],\n  [\"Belarusian\", \"\\u0431\\u0435\\u043B\\u0430\\u0440\\u0443\\u0441\\u043A\\u0430\\u044F \\u043C\\u043E\\u0432\\u0430\", \"be\", \"bel\", \"bel\"],\n  [\"Bosnian\", \"bosanski jezik\", \"bs\", \"bos\", \"bos\"],\n  [\"Breton\", \"brezhoneg\", \"br\", \"bre\", \"bre\"],\n  [\"Bulgarian\", \"\\u0431\\u044A\\u043B\\u0433\\u0430\\u0440\\u0441\\u043A\\u0438 \\u0435\\u0437\\u0438\\u043A\", \"bg\", \"bul\", \"bul\"],\n  [\"Burmese\", \"\\u1017\\u1019\\u102C\\u1005\\u102C\", \"my\", \"mya\", \"bur\"],\n  [\"Catalan, Valencian\", \"catal\\xE0, valenci\\xE0\", \"ca\", \"cat\", \"cat\"],\n  [\"Chamorro\", \"Chamoru\", \"ch\", \"cha\", \"cha\"],\n  [\"Chechen\", \"\\u043D\\u043E\\u0445\\u0447\\u0438\\u0439\\u043D \\u043C\\u043E\\u0442\\u0442\", \"ce\", \"che\", \"che\"],\n  [\"Chichewa, Chewa, Nyanja\", \"chiChe\\u0175a, chinyanja\", \"ny\", \"nya\", \"nya\"],\n  [\"Chuvash\", \"\\u0447\\u04D1\\u0432\\u0430\\u0448 \\u0447\\u04D7\\u043B\\u0445\\u0438\", \"cv\", \"chv\", \"chv\"],\n  [\"Cornish\", \"Kernewek\", \"kw\", \"cor\", \"cor\"],\n  [\"Corsican\", \"corsu, lingua corsa\", \"co\", \"cos\", \"cos\"],\n  [\"Croatian\", \"hrvatski jezik\", \"hr\", \"hrv\", \"hrv\"],\n  [\"Czech\", \"\\u010De\\u0161tina, \\u010Desk\\xFD jazyk\", \"cs\", \"ces\", \"cze\"],\n  [\"Danish\", \"dansk\", \"da\", \"dan\", \"dan\"],\n  [\"Divehi, Dhivehi, Maldivian\", \"\\u078B\\u07A8\\u0788\\u07AC\\u0780\\u07A8\", \"dv\", \"div\", \"div\"],\n  [\"Dutch, Flemish\", \"Nederlands, Vlaams\", \"nl\", \"nld\", \"dut\"],\n  [\"Dzongkha\", \"\\u0F62\\u0FAB\\u0F7C\\u0F44\\u0F0B\\u0F41\", \"dz\", \"dzo\", \"dzo\"],\n  [\"English\", \"English\", \"en\", \"eng\", \"eng\"],\n  [\"Ewe\", \"E\\u028Begbe\", \"ee\", \"ewe\", \"ewe\"],\n  [\"Faroese\", \"f\\xF8royskt\", \"fo\", \"fao\", \"fao\"],\n  [\"Fijian\", \"vosa Vakaviti\", \"fj\", \"fij\", \"fij\"],\n  [\"Finnish\", \"suomi, suomen kieli\", \"fi\", \"fin\", \"fin\"],\n  [\"French\", \"fran\\xE7ais, langue fran\\xE7aise\", \"fr\", \"fra\", \"fre\"],\n  [\"Galician\", \"Galego\", \"gl\", \"glg\", \"glg\"],\n  [\"Georgian\", \"\\u10E5\\u10D0\\u10E0\\u10D7\\u10E3\\u10DA\\u10D8\", \"ka\", \"kat\", \"geo\"],\n  [\"German\", \"Deutsch\", \"de\", \"deu\", \"ger\"],\n  [\"Greek (modern)\", \"\\u03B5\\u03BB\\u03BB\\u03B7\\u03BD\\u03B9\\u03BA\\u03AC\", \"el\", \"ell\", \"gre\"],\n  [\"Gujarati\", \"\\u0A97\\u0AC1\\u0A9C\\u0AB0\\u0ABE\\u0AA4\\u0AC0\", \"gu\", \"guj\", \"guj\"],\n  [\"Haitian, Haitian Creole\", \"Krey\\xF2l ayisyen\", \"ht\", \"hat\", \"hat\"],\n  [\"Hausa\", \"(Hausa) \\u0647\\u064E\\u0648\\u064F\\u0633\\u064E\", \"ha\", \"hau\", \"hau\"],\n  [\"Herero\", \"Otjiherero\", \"hz\", \"her\", \"her\"],\n  [\"Hindi\", \"\\u0939\\u093F\\u0928\\u094D\\u0926\\u0940, \\u0939\\u093F\\u0902\\u0926\\u0940\", \"hi\", \"hin\", \"hin\"],\n  [\"Hiri Motu\", \"Hiri Motu\", \"ho\", \"hmo\", \"hmo\"],\n  [\"Hungarian\", \"magyar\", \"hu\", \"hun\", \"hun\"],\n  [\"Irish\", \"Gaeilge\", \"ga\", \"gle\", \"gle\"],\n  [\"Igbo\", \"As\\u1EE5s\\u1EE5 Igbo\", \"ig\", \"ibo\", \"ibo\"],\n  [\"Icelandic\", \"\\xCDslenska\", \"is\", \"isl\", \"ice\"],\n  [\"Italian\", \"Italiano\", \"it\", \"ita\", \"ita\"],\n  [\"Japanese\", \"\\u65E5\\u672C\\u8A9E (\\u306B\\u307B\\u3093\\u3054)\", \"ja\", \"jpn\", \"jpn\"],\n  [\"Javanese\", \"\\uA9A7\\uA9B1\\uA997\\uA9AE, Basa Jawa\", \"jv\", \"jav\", \"jav\"],\n  [\"Kalaallisut, Greenlandic\", \"kalaallisut, kalaallit oqaasii\", \"kl\", \"kal\", \"kal\"],\n  [\"Kannada\", \"\\u0C95\\u0CA8\\u0CCD\\u0CA8\\u0CA1\", \"kn\", \"kan\", \"kan\"],\n  [\"Kashmiri\", \"\\u0915\\u0936\\u094D\\u092E\\u0940\\u0930\\u0940, \\u0643\\u0634\\u0645\\u064A\\u0631\\u064A\", \"ks\", \"kas\", \"kas\"],\n  [\"Kazakh\", \"\\u049B\\u0430\\u0437\\u0430\\u049B \\u0442\\u0456\\u043B\\u0456\", \"kk\", \"kaz\", \"kaz\"],\n  [\"Kikuyu, Gikuyu\", \"G\\u0129k\\u0169y\\u0169\", \"ki\", \"kik\", \"kik\"],\n  [\"Kinyarwanda\", \"Ikinyarwanda\", \"rw\", \"kin\", \"kin\"],\n  [\"Kirghiz, Kyrgyz\", \"\\u041A\\u044B\\u0440\\u0433\\u044B\\u0437\\u0447\\u0430, \\u041A\\u044B\\u0440\\u0433\\u044B\\u0437 \\u0442\\u0438\\u043B\\u0438\", \"ky\", \"kir\", \"kir\"],\n  [\"Korean\", \"\\uD55C\\uAD6D\\uC5B4\", \"ko\", \"kor\", \"kor\"],\n  [\"Kuanyama, Kwanyama\", \"Kuanyama\", \"kj\", \"kua\", \"kua\"],\n  [\"Luxembourgish, Letzeburgesch\", \"L\\xEBtzebuergesch\", \"lb\", \"ltz\", \"ltz\"],\n  [\"Ganda\", \"Luganda\", \"lg\", \"lug\", \"lug\"],\n  [\"Limburgan, Limburger, Limburgish\", \"Limburgs\", \"li\", \"lim\", \"lim\"],\n  [\"Lingala\", \"Ling\\xE1la\", \"ln\", \"lin\", \"lin\"],\n  [\"Lao\", \"\\u0E9E\\u0EB2\\u0EAA\\u0EB2\\u0EA5\\u0EB2\\u0EA7\", \"lo\", \"lao\", \"lao\"],\n  [\"Lithuanian\", \"lietuvi\\u0173 kalba\", \"lt\", \"lit\", \"lit\"],\n  [\"Manx\", \"Gaelg, Gailck\", \"gv\", \"glv\", \"glv\"],\n  [\"Macedonian\", \"\\u043C\\u0430\\u043A\\u0435\\u0434\\u043E\\u043D\\u0441\\u043A\\u0438 \\u0458\\u0430\\u0437\\u0438\\u043A\", \"mk\", \"mkd\", \"mac\"],\n  [\"Malayalam\", \"\\u0D2E\\u0D32\\u0D2F\\u0D3E\\u0D33\\u0D02\", \"ml\", \"mal\", \"mal\"],\n  [\"Maltese\", \"Malti\", \"mt\", \"mlt\", \"mlt\"],\n  [\"Marshallese\", \"Kajin M\\u0327aje\\u013C\", \"mh\", \"mah\", \"mah\"],\n  [\"Navajo, Navaho\", \"Din\\xE9 bizaad\", \"nv\", \"nav\", \"nav\"],\n  [\"Nepali\", \"\\u0928\\u0947\\u092A\\u093E\\u0932\\u0940\", \"ne\", \"nep\", \"nep\"],\n  [\"Ndonga\", \"Owambo\", \"ng\", \"ndo\", \"ndo\"],\n  [\"Occitan\", \"occitan, lenga d'\\xF2c\", \"oc\", \"oci\", \"oci\"],\n  [\"Ossetian, Ossetic\", \"\\u0438\\u0440\\u043E\\u043D \\xE6\\u0432\\u0437\\u0430\\u0433\", \"os\", \"oss\", \"oss\"],\n  [\"Panjabi, Punjabi\", \"\\u0A2A\\u0A70\\u0A1C\\u0A3E\\u0A2C\\u0A40\", \"pa\", \"pan\", \"pan\"],\n  [\"Polish\", \"j\\u0119zyk polski, polszczyzna\", \"pl\", \"pol\", \"pol\"],\n  [\"Portuguese\", \"Portugu\\xEAs\", \"pt\", \"por\", \"por\"],\n  [\"Romansh\", \"Rumantsch Grischun\", \"rm\", \"roh\", \"roh\"],\n  [\"Russian\", \"\\u0440\\u0443\\u0441\\u0441\\u043A\\u0438\\u0439\", \"ru\", \"rus\", \"rus\"],\n  [\"Sindhi\", \"\\u0938\\u093F\\u0928\\u094D\\u0927\\u0940, \\u0633\\u0646\\u068C\\u064A\\u060C \\u0633\\u0646\\u062F\\u06BE\\u06CC\", \"sd\", \"snd\", \"snd\"],\n  [\"Northern Sami\", \"Davvis\\xE1megiella\", \"se\", \"sme\", \"sme\"],\n  [\"Samoan\", \"gagana fa'a Samoa\", \"sm\", \"smo\", \"smo\"],\n  [\"Sango\", \"y\\xE2ng\\xE2 t\\xEE s\\xE4ng\\xF6\", \"sg\", \"sag\", \"sag\"],\n  [\"Gaelic, Scottish Gaelic\", \"G\\xE0idhlig\", \"gd\", \"gla\", \"gla\"],\n  [\"Shona\", \"chiShona\", \"sn\", \"sna\", \"sna\"],\n  [\"Sinhala, Sinhalese\", \"\\u0DC3\\u0DD2\\u0D82\\u0DC4\\u0DBD\", \"si\", \"sin\", \"sin\"],\n  [\"Slovak\", \"Sloven\\u010Dina, Slovensk\\xFD Jazyk\", \"sk\", \"slk\", \"slo\"],\n  [\"Somali\", \"Soomaaliga, af Soomaali\", \"so\", \"som\", \"som\"],\n  [\"Southern Sotho\", \"Sesotho\", \"st\", \"sot\", \"sot\"],\n  [\"Spanish, Castilian\", \"Espa\\xF1ol\", \"es\", \"spa\", \"spa\"],\n  [\"Sundanese\", \"Basa Sunda\", \"su\", \"sun\", \"sun\"],\n  [\"Swedish\", \"Svenska\", \"sv\", \"swe\", \"swe\"],\n  [\"Tamil\", \"\\u0BA4\\u0BAE\\u0BBF\\u0BB4\\u0BCD\", \"ta\", \"tam\", \"tam\"],\n  [\"Telugu\", \"\\u0C24\\u0C46\\u0C32\\u0C41\\u0C17\\u0C41\", \"te\", \"tel\", \"tel\"],\n  [\"Tajik\", \"\\u0442\\u043E\\u04B7\\u0438\\u043A\\u04E3, to\\xE7ik\\u012B, \\u062A\\u0627\\u062C\\u06CC\\u06A9\\u06CC\", \"tg\", \"tgk\", \"tgk\"],\n  [\"Thai\", \"\\u0E44\\u0E17\\u0E22\", \"th\", \"tha\", \"tha\"],\n  [\"Tigrinya\", \"\\u1275\\u130D\\u122D\\u129B\", \"ti\", \"tir\", \"tir\"],\n  [\"Turkmen\", \"T\\xFCrkmen, \\u0422\\u04AF\\u0440\\u043A\\u043C\\u0435\\u043D\", \"tk\", \"tuk\", \"tuk\"],\n  [\"Tswana\", \"Setswana\", \"tn\", \"tsn\", \"tsn\"],\n  [\"Tongan (Tonga Islands)\", \"Faka Tonga\", \"to\", \"ton\", \"ton\"],\n  [\"Turkish\", \"T\\xFCrk\\xE7e\", \"tr\", \"tur\", \"tur\"],\n  [\"Tsonga\", \"Xitsonga\", \"ts\", \"tso\", \"tso\"],\n  [\"Tatar\", \"\\u0442\\u0430\\u0442\\u0430\\u0440 \\u0442\\u0435\\u043B\\u0435, tatar tele\", \"tt\", \"tat\", \"tat\"],\n  [\"Uighur, Uyghur\", \"\\u0626\\u06C7\\u064A\\u063A\\u06C7\\u0631\\u0686\\u06D5, Uyghurche\", \"ug\", \"uig\", \"uig\"],\n  [\"Ukrainian\", \"\\u0423\\u043A\\u0440\\u0430\\u0457\\u043D\\u0441\\u044C\\u043A\\u0430\", \"uk\", \"ukr\", \"ukr\"],\n  [\"Urdu\", \"\\u0627\\u0631\\u062F\\u0648\", \"ur\", \"urd\", \"urd\"],\n  [\"Venda\", \"Tshiven\\u1E13a\", \"ve\", \"ven\", \"ven\"],\n  [\"Vietnamese\", \"Ti\\u1EBFng Vi\\u1EC7t\", \"vi\", \"vie\", \"vie\"],\n  [\"Walloon\", \"Walon\", \"wa\", \"wln\", \"wln\"],\n  [\"Welsh\", \"Cymraeg\", \"cy\", \"cym\", \"wel\"],\n  [\"Wolof\", \"Wollof\", \"wo\", \"wol\", \"wol\"],\n  [\"Xhosa\", \"isiXhosa\", \"xh\", \"xho\", \"xho\"],\n  [\"Yoruba\", \"Yor\\xF9b\\xE1\", \"yo\", \"yor\", \"yor\"],\n  [\"Zulu\", \"isiZulu\", \"zu\", \"zul\", \"zul\"]\n];\n\n// src/index.ts\nvar codes = [];\nvar by639_1 = {};\nvar by639_2T = {};\nvar by639_2B = {};\ndata_default.forEach((row) => {\n  var code = {\n    name: row[0],\n    nativeName: row[1],\n    iso639_1: row[2],\n    iso639_2T: row[3],\n    iso639_2B: row[4]\n  };\n  by639_1[row[2]] = by639_2T[row[3]] = by639_2B[row[4]] = code;\n  codes.push(code);\n});\nvar src_default = codes;\nexport {\n  by639_1,\n  by639_2B,\n  by639_2T,\n  codes,\n  src_default as default\n};\n//# sourceMappingURL=index.mjs.map","import langs from 'iso-language-codes';\r\n\r\n/**\r\n * Use regex to approximate word count in a string\r\n * @param {string} text\r\n * @return {number}\r\n */\r\nexport function approximateWordCount(text) {\r\n  const m = text.match(/\\S+/g);\r\n  return m ? m.length : 0;\r\n}\r\n\r\n/**\r\n * Checks whether the current browser is on android\r\n * @param {string} [userAgent]\r\n * @return {boolean}\r\n */\r\nexport function isAndroid(userAgent = navigator.userAgent) {\r\n  return /android/i.test(userAgent);\r\n}\r\n\r\n/** @type {{[lang: string]: string}} */\r\n// Handle odd one-off language pairs that might show up over time\r\nconst specialLangs =  {\r\n  \"zh-hans\": \" (Zhngwn)\",\r\n};\r\n/**\r\n * @typedef {string} ISO6391\r\n * Language code in ISO 639-1 format. e.g. en, fr, zh\r\n * Can also retrieve language native name + ISO 639-1 code\r\n **/\r\n\r\n/**\r\n * @param {string} language in some format\r\n * @param {boolean?} getName gets Native Name + language code if true\r\n * @return {ISO6391?}\r\n */\r\nexport function toISO6391(language, getName = false) {\r\n  if (!language) return null;\r\n  language = language.toLowerCase();\r\n\r\n  return searchForISO6391(language, ['iso639_1'], getName) ||\r\n    searchForISO6391(language, ['iso639_2T'], getName) ||\r\n    searchForISO6391(language, ['iso639_2B', 'nativeName', 'name'], getName);\r\n}\r\n\r\n/**\r\n * Searches for the given long in the given columns.\r\n * @param {string} language\r\n * @param {Array<keyof import('iso-language-codes').Code>} columnsToSearch\r\n * @param {boolean?} getName\r\n * @return {ISO6391?}\r\n */\r\nfunction searchForISO6391(language, columnsToSearch, getName) {\r\n  for (const lang of langs) {\r\n    for (const colName of columnsToSearch) {\r\n      if (lang[colName].split(', ').map(x => x.toLowerCase()).indexOf(language) != -1) {\r\n        if (getName) return `${lang.nativeName.split(\", \")[0]} (${lang.iso639_1})`;\r\n        return lang.iso639_1;\r\n      }\r\n    }\r\n  }\r\n  if (specialLangs[language]) return `${specialLangs[language]} (${language})`;\r\n  return null;\r\n}\r\n\r\n/**\r\n * Checks whether the current browser supports localStorage or\r\n * if the current context has access to it.\r\n * @return {boolean}\r\n */\r\nexport function hasLocalStorage() {\r\n  try {\r\n    return !!window.localStorage;\r\n  } catch (e) {\r\n    // Will throw in sandboxed iframe\r\n    // DOMException: Window.localStorage getter: Forbidden in a sandboxed document without the 'allow-same-origin' flag.\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const DEBUG_READ_ALOUD = location.toString().indexOf('_debugReadAloud=true') != -1;\r\n\r\nexport async function checkIfFiresPause() {\r\n  // Pick some random text so that if it accidentally speaks, it's not too annoying\r\n  const u = new SpeechSynthesisUtterance(\"Loading\");\r\n  let calledPause = false;\r\n  u.addEventListener('pause', () => calledPause = true);\r\n  speechSynthesis.speak(u);\r\n  await new Promise(res => setTimeout(res, 10));\r\n  speechSynthesis.pause();\r\n  return calledPause;\r\n}\r\n","/**\r\n * @template T\r\n */\r\nexport class Cache {\r\n  constructor(maxSize = 10) {\r\n    this.maxSize = maxSize;\r\n    /** @type {T[]} */\r\n    this.entries = [];\r\n  }\r\n\r\n  /**\r\n   * @param {T} entry\r\n   */\r\n  add(entry) {\r\n    if (this.entries.length >= this.maxSize) {\r\n      this.entries.shift();\r\n    }\r\n    this.entries.push(entry);\r\n  }\r\n}\r\n"],"names":["IAActivityIndicatorMode","Object","freeze","processing","complete","IAActivityIndicator","properties","mode","type","String","constructor","super","this","render","styles","checkmarkColorCss","completedRingColorCss","loadingRingColorCss","loadingDotColorCss","window","customElements","define","BookReaderPlugin","br","_classCallCheck","options","key","value","assign","pageContainer","$toolbarElement","$navBar","Worker","globalThis","url","Promise","async","accept","import","addEventListener","eventName","callback","then","worker","on","data","postMessage","message","terminate","CancelledError","Error","TranslatorBacking","registryUrl","downloadTimeout","parseInt","registry","loadModelRegistery","buffers","Map","pivotLanguage","models","onerror","err","console","error","loadWorker","workerUrl","URL","serial","pending","call","name","args","reject","id","set","callsite","map","arg","join","stack","result","has","debug","arguments","get","delete","undefined","bind","exports","Proxy","target","receiver","response","fetch","credentials","json","Array","from","entries","files","languages","match","to","getTranslationModel","JSON","stringify","promise","loadTranslationModel","catch","performance","mark","filter","model","abort","escape","signal","fromEntries","race","all","part","file","expectedSha256Hash","cause","removeEventListener","measure","vocabs","vocab","trgvocab","srcvocab","keys","config","endsWith","qualityModel","shortlist","lex","checksum","extra","controller","AbortController","timeout","setTimeout","hexToBase64","arrayBuffer","clearTimeout","hexstring","btoa","a","fromCharCode","getModels","findModels","direct","outbound","inbound","forEach","push","length","BatchTranslator","backing","workers","workerLimit","Math","max","queue","batchSerial","batchSize","remove","notify","find","idle","placeholder","e","batch","shift","consumeBatch","requests","translate","request","priority","resolve","enqueue","sort","b","hasTranslationModel","responses","texts","text","html","qualityScores","toString","i","_regeneratorRuntime","t","r","prototype","n","hasOwnProperty","o","defineProperty","Symbol","iterator","c","asyncIterator","u","toStringTag","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","setPrototypeOf","__proto__","awrap","reverse","pop","prev","charAt","slice","stop","rval","handle","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","apply","_next","_throw","_defineProperties","_toPropertyKey","_defineProperty","toPrimitive","_toPrimitive","TranslationManager","_this","Cache","_ref","_callee","fromLang","toLang","pageIndex","paragraphIndex","cachedEntry","_resolve","_reject","_context","active","concat","alreadyTranslated","x","index","currentlyTranslating","res","rej","translator","resp","add","_x","_x2","_x3","_x4","_x5","_x6","_ref2","_callee2","fromLanguage","toLanguage","_context2","_x7","_x8","enModel","code","fromLanguages","toLanguages","_initWorker","_callee3","registryJson","_i","_Object$values","language","_i2","_Object$values2","modelType","arr","_i3","_Object$values3","obj","firstLang","secondLang","fromModelType","_this2","_context3","initPromise","_initResolve","_initReject","encodeURIComponent","publicPath","toISO6391","modelRegistry","_createClass","_callSuper","_getPrototypeOf","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","Boolean","valueOf","_inherits","_setPrototypeOf","_initialize","BrTranslatePanel","BookReader","TranslatePlugin","_BookReaderPlugin","_len","_key","enabled","panelDisclaimerText","page","querySelectorAll","selectedLangFrom","clearAllTranslations","detail","langFromCode","_panel","requestUpdate","translationManager","some","lang","entry","log","langToCode","_render","translateActivePageContainerElements","userToggleTranslate","trigger","_init","_callee5","currentLanguage","_context5","bookLanguage","replace","imagesBaseURL","_ref5","_callee4","_","_ref4","pageElement","_context4","$container","translateRenderedLayer","_ref6","pageContainerEl","_step","_iterator","_createForOfIteratorHelper","paragraphEl","textContent","fitVisiblePage","initWorker","_step2","currentlyActiveContainers","getActivePageContainerElements","visiblePageContainers","element","classList","contains","hiddenPageContainers","_iterator2","_step3","_iterator3","loadingPage","_translateRenderedLayer","_callee7","pageTranslationLayer","textLayerElement","paragraphs","paragraphTranslationPromises","_this3","_context7","constModeThumb","dataset","querySelector","document","createElement","setAttribute","prepend","$","css","getParagraphsOnPage","_ref7","_callee6","paragraph","pidx","translatedParagraph","originalParagraphStyle","fontSize","_translatedParagraph$","_paragraphs$pidx","pagePriority","translatedText","firstWordSpacing","createSpan","_context6","className","ariaHidden","stopPropagation","stopImmediatePropagation","preventDefault","append","parseFloat","loadingModel","getTranslation","firstElementChild","firstChild","appendChild","leafIndex","translateLayer","_getTranslateLayers","_callee9","pageContainerElements","_this4","_context9","getActivePageContainerElementsForIndex","toArray","handler","_ref8","_callee8","extraParams","_context8","off","_x10","_x11","_x9","el","paragEl","translateLayerEl","parentElement","pageNumber","getAttribute","split","textLayerEl","style","transform","adjustedFontSize","clientHeight","scrollHeight","textHeight","newLineHeight","_this5","shell","menuProviders","icon","_templateObject","_taggedTemplateLiteral","label","component","_templateObject2","userTranslationActive","detectedToLang","detectedFromLang","handleFromLangChange","handleToLangChange","handleToggleTranslation","updateMenuContents","registerPlugin","customElement","LitElement","_LitElement2","_this6","_len2","_key2","F","kind","decorators","property","dispatchEvent","CustomEvent","_this7","_templateObject3","disclaimerMessage","_onLangToChange","sortBy","toLowerCase","_templateObject4","_toggleTranslation","_getLangName","prevSelectedLang","_onLangFromChange","_templateObject5","_statusWarning","_languageModelStatus","event","langFromChangedEvent","bubbles","composed","_getSelectedLang","langToChangedEvent","dropdown","_toConsumableArray","toggleTranslateEvent","_templateObject6","_templateObject7","codes","by639_1","by639_2T","by639_2B","row","nativeName","iso639_1","iso639_2T","iso639_2B","src_default","isArray","_arrayLikeToArray","test","_unsupportedIterableToArray","_n","approximateWordCount","m","isAndroid","userAgent","navigator","specialLangs","getName","searchForISO6391","columnsToSearch","langs","indexOf","hasLocalStorage","localStorage","DEBUG_READ_ALOUD","location","maxSize"],"sourceRoot":""}